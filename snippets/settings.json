{
  "settingsVersion": 2,
  "activeSetId": "98106505-4172-4ebb-b690-c0e1467575d1",
  "sets": [
    {
      "id": "98106505-4172-4ebb-b690-c0e1467575d1",
      "name": "01-ClientDemo",
      "description": "01.ClientDemo",
      "snippets": [
        {
          "id": "c2b99f42-a0fc-4d4c-a433-9d4170631740",
          "name": "Setup",
          "content": "using GitHub.Copilot.SDK;\nusing Microsoft.Extensions.Logging;\n\n// ============================================================================\n// 01 \u2013 CLIENT DEMO: Client Lifecycle & Connection\n// 01 \u2013 DEMO DE CLIENTE: Ciclo de vida y conexi\u00f3n del cliente\n//\n// Demonstrates / Demuestra:\n//   \u2022 Creating a CopilotClient with UseLoggedInUser\n//   \u2022 Starting and connecting (Stdio transport)\n//   \u2022 Ping, Status, Auth Status, List Models\n//   \u2022 Graceful Stop vs ForceStop\n// ============================================================================\n\nusing var loggerFactory = LoggerFactory.Create(b =>\n    b.AddConsole().SetMinimumLevel(LogLevel.Warning));\nvar logger = loggerFactory.CreateLogger<CopilotClient>();\n\n// Language selection\nConsole.WriteLine(\"================================================================\");\nConsole.WriteLine(\"  Select language / Seleccione idioma:\");\nConsole.WriteLine(\"  1. English\");\nConsole.WriteLine(\"  2. Espa\u00f1ol\");\nConsole.WriteLine(\"================================================================\");\nConsole.Write(\"  Choice (1 or 2): \");\nvar langChoice = Console.ReadLine()?.Trim();\nbool isSpanish = langChoice == \"2\";\nConsole.WriteLine();\n\nConsole.WriteLine(\"================================================================\");\nif (isSpanish)\n{\n    Console.WriteLine(\"  01 - DEMO: Ciclo de vida y conexion del cliente\");\n}\nelse\n{\n    Console.WriteLine(\"  01 - CLIENT DEMO: Client Lifecycle & Connection\");\n}\nConsole.WriteLine(\"================================================================\");\nConsole.WriteLine();",
          "hotkeyNumber": 1,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "09beb4b6-aa19-4889-b918-b07cfcee69a4",
          "name": "1. Create the client",
          "content": "// -- 1. Create the client / Crear el cliente --\nConsole.WriteLine(isSpanish\n    ? \"=== 1. Creando CopilotClient (UseLoggedInUser = true) ===\"\n    : \"=== 1. Creating CopilotClient (UseLoggedInUser = true) ===\");\nConsole.WriteLine();\n\nvar client = new CopilotClient(new CopilotClientOptions\n{\n    UseLoggedInUser = true,\n    Logger = logger\n});\n\nConsole.WriteLine(isSpanish\n    ? $\"  Estado inicial: {client.State}\"\n    : $\"  Initial state: {client.State}\");\nConsole.WriteLine();",
          "hotkeyNumber": 2,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "0c734e7b-9fb2-44ae-bb98-ea07164a0a2d",
          "name": "2. Start the client",
          "content": "// -- 2. Start the client / Iniciar el cliente --\nConsole.WriteLine(isSpanish\n    ? \"=== 2. Iniciando cliente (StartAsync) ===\"\n    : \"=== 2. Starting client (StartAsync) ===\");\nawait client.StartAsync();\nConsole.WriteLine(isSpanish\n    ? $\"  Estado tras iniciar: {client.State}\"\n    : $\"  State after start: {client.State}\");\nConsole.WriteLine();",
          "hotkeyNumber": 3,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "6bef75bc-e574-45db-b259-43a570007cbf",
          "name": "3. Ping",
          "content": "// -- 3. Ping / Verificacion de conexion --\nConsole.WriteLine(\"=== 3. Ping ===\");\nvar pong = await client.PingAsync(\"hello from demo!\");\nConsole.WriteLine(isSpanish\n    ? $\"  Enviado:  \\\"hello from demo!\\\"\"\n    : $\"  Sent:     \\\"hello from demo!\\\"\");\nConsole.WriteLine(isSpanish\n    ? $\"  Respuesta: \\\"{pong.Message}\\\"\"\n    : $\"  Reply:    \\\"{pong.Message}\\\"\");\nConsole.WriteLine($\"  Timestamp: {pong.Timestamp}\");\nConsole.WriteLine();",
          "hotkeyNumber": 4,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "3139534e-7c17-4e62-85f6-2597fbfb26d4",
          "name": "4. Get Status",
          "content": "// -- 4. Get Status / Obtener estado --\nConsole.WriteLine(isSpanish\n    ? \"=== 4. Estado (GetStatusAsync) ===\"\n    : \"=== 4. Status (GetStatusAsync) ===\");\nvar status = await client.GetStatusAsync();\nConsole.WriteLine(isSpanish\n    ? $\"  Version:          {status.Version}\"\n    : $\"  Version:          {status.Version}\");\nConsole.WriteLine(isSpanish\n    ? $\"  Version Protocolo: {status.ProtocolVersion}\"\n    : $\"  Protocol Version:  {status.ProtocolVersion}\");\nConsole.WriteLine();",
          "hotkeyNumber": 5,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "a684b102-59e5-40a5-be58-83fce73bdfa6",
          "name": "5. Auth Status",
          "content": "// -- 5. Auth Status / Estado de autenticacion --\nConsole.WriteLine(isSpanish\n    ? \"=== 5. Estado de autenticacion (GetAuthStatusAsync) ===\"\n    : \"=== 5. Auth Status (GetAuthStatusAsync) ===\");\nvar auth = await client.GetAuthStatusAsync();\nConsole.WriteLine(isSpanish\n    ? $\"  Autenticado: {auth.IsAuthenticated}\"\n    : $\"  Authenticated: {auth.IsAuthenticated}\");\nConsole.WriteLine(isSpanish\n    ? $\"  Tipo:    {auth.AuthType}\"\n    : $\"  Auth Type: {auth.AuthType}\");\nConsole.WriteLine(isSpanish\n    ? $\"  Mensaje: {auth.StatusMessage}\"\n    : $\"  Message: {auth.StatusMessage}\");\nConsole.WriteLine();",
          "hotkeyNumber": 6,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "9c5657ed-d9eb-425c-af97-63a831816dab",
          "name": "6. List Models",
          "content": "// -- 6. List Models / Listar modelos --\nConsole.WriteLine(isSpanish\n    ? \"=== 6. Listar modelos disponibles (ListModelsAsync) ===\"\n    : \"=== 6. List Models (ListModelsAsync) ===\");\nif (auth.IsAuthenticated)\n{\n    var models = await client.ListModelsAsync();\n    Console.WriteLine(isSpanish\n        ? $\"  Se encontraron {models.Count} modelo(s):\"\n        : $\"  Found {models.Count} model(s):\");\n    Console.WriteLine();\n    Console.WriteLine($\"  {\"ID\",-35} {\"Name\",-25} {\"Capabilities\"}\");\n    Console.WriteLine($\"  {\"--\",-35} {\"----\",-25} {\"------------\"}\");\n    foreach (var m in models)\n    {\n        Console.WriteLine($\"  {m.Id,-35} {m.Name,-25} {m.Capabilities}\");\n    }\n}\nelse\n{\n    Console.WriteLine(isSpanish\n        ? \"  Omitido (no autenticado)\"\n        : \"  Skipped (not authenticated)\");\n}\nConsole.WriteLine();",
          "hotkeyNumber": 7,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "2f282b3a-83fc-47b0-afda-f5c00c0da617",
          "name": "7. Graceful Stop",
          "content": "// -- 7. Graceful Stop / Parada ordenada --\nConsole.WriteLine(isSpanish\n    ? \"=== 7. Parada ordenada (StopAsync) ===\"\n    : \"=== 7. Graceful Stop (StopAsync) ===\");\nawait client.StopAsync();\nConsole.WriteLine(isSpanish\n    ? $\"  Estado tras parar: {client.State}\"\n    : $\"  State after stop: {client.State}\");\nConsole.WriteLine();",
          "hotkeyNumber": 8,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "dc5b257b-b36a-4ceb-9317-cb2ae5da9bc1",
          "name": "8. ForceStop demo",
          "content": "// -- 8. ForceStop demo / Demostracion ForceStop --\nConsole.WriteLine(isSpanish\n    ? \"=== 8. Demostracion de ForceStop ===\"\n    : \"=== 8. ForceStop Demo ===\");\nConsole.WriteLine(isSpanish\n    ? \"  Iniciando un nuevo cliente para demostrar ForceStop...\"\n    : \"  Starting a new client to demonstrate ForceStop...\");\n\nvar client2 = new CopilotClient(new CopilotClientOptions\n{\n    UseLoggedInUser = true,\n    Logger = logger\n});\nawait client2.StartAsync();\nConsole.WriteLine($\"  State: {client2.State}\");\n\n// ForceStop skips cleanup / ForceStop omite la limpieza\nawait client2.ForceStopAsync();\nConsole.WriteLine($\"  State after ForceStop: {client2.State}\");\nawait client2.DisposeAsync();\nConsole.WriteLine();",
          "hotkeyNumber": 9,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        }
      ],
      "createdDate": "2026-02-23T14:00:00",
      "modifiedDate": "2026-02-23T14:00:00",
      "colorHex": "#3498db",
      "iconName": "folder"
    },
    {
      "id": "788ea401-f0fe-435c-946c-68089e588d80",
      "name": "02-SessionDemo",
      "description": "02.SessionDemo",
      "snippets": [
        {
          "id": "c4572145-0217-43ee-aa28-855af2476a9d",
          "name": "Setup",
          "content": "using System.Text;\nusing GitHub.Copilot.SDK;\nusing Microsoft.Extensions.AI;\nusing Microsoft.Extensions.Logging;\n\n// ============================================================================\n// 02 \u2013 SESSION DEMO: Session Lifecycle, Events & Multi-turn\n// 02 \u2013 DEMO DE SESI\u00d3N: Ciclo de vida, eventos y conversaci\u00f3n multi-turno\n//\n// Demonstrates / Demuestra:\n//   \u2022 Create & destroy sessions\n//   \u2022 Multi-turn stateful conversations\n//   \u2022 Event subscription (On)\n//   \u2022 SendAsync vs SendAndWaitAsync\n//   \u2022 Session resume (ResumeSessionAsync)\n//   \u2022 Session abort (AbortAsync)\n//   \u2022 Streaming deltas\n//   \u2022 System message configuration (Append / Replace)\n// ============================================================================\n\nusing var loggerFactory = LoggerFactory.Create(b =>\n    b.AddConsole().SetMinimumLevel(LogLevel.Warning));\nvar logger = loggerFactory.CreateLogger<CopilotClient>();\n\n// Language selection\nConsole.WriteLine(\"================================================================\");\nConsole.WriteLine(\"  Select language / Seleccione idioma:\");\nConsole.WriteLine(\"  1. English\");\nConsole.WriteLine(\"  2. Espa\u00f1ol\");\nConsole.WriteLine(\"================================================================\");\nConsole.Write(\"  Choice (1 or 2): \");\nvar langChoice = Console.ReadLine()?.Trim();\nbool isSpanish = langChoice == \"2\";\nConsole.WriteLine();\n\nConsole.WriteLine(\"================================================================\");\nif (isSpanish)\n{\n    Console.WriteLine(\"  02 - DEMO: Ciclo de vida, eventos y multi-turno\");\n}\nelse\n{\n    Console.WriteLine(\"  02 - SESSION DEMO: Lifecycle, Events & Multi-turn\");\n}\nConsole.WriteLine(\"================================================================\");\nConsole.WriteLine();\n\nvar client = new CopilotClient(new CopilotClientOptions\n{\n    UseLoggedInUser = true,\n    Logger = logger\n});\nawait client.StartAsync();\nConsole.WriteLine(isSpanish ? \"  Cliente iniciado.\\n\" : \"  Client started.\\n\");",
          "hotkeyNumber": 1,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "4d0fbf73-9e27-424b-a199-2dd950d8b567",
          "name": "1. Create & Destroy Session",
          "content": "// -- 1. Create & Destroy Session / Crear y destruir sesion --\nConsole.WriteLine(isSpanish\n    ? \"=== 1. Crear y destruir una sesion ===\"\n    : \"=== 1. Create & Destroy Session ===\");\n{\n    var session = await client.CreateSessionAsync(new SessionConfig { Model = \"gpt-4o\" });\n    Console.WriteLine(isSpanish\n        ? $\"  Sesi\u00f3n creada: {session.SessionId}\"\n        : $\"  Session created: {session.SessionId}\");\n\n    var messages = await session.GetMessagesAsync();\n    Console.WriteLine(isSpanish\n        ? $\"  Mensajes iniciales: {messages.Count}\"\n        : $\"  Initial messages: {messages.Count}\");\n    Console.WriteLine(isSpanish\n        ? $\"  Tipo primer evento: {messages[0].GetType().Name}\"\n        : $\"  First event type: {messages[0].GetType().Name}\");\n\n    await session.DisposeAsync();\n    Console.WriteLine(isSpanish\n        ? \"  Sesi\u00f3n destruida.\"\n        : \"  Session disposed.\");\n\n    try\n    {\n        await session.GetMessagesAsync();\n    }\n    catch (IOException ex)\n    {\n        Console.WriteLine(isSpanish\n            ? $\"  Error esperado: {ex.Message}\"\n            : $\"  Expected error after dispose: {ex.Message}\");\n    }\n}\nConsole.WriteLine();",
          "hotkeyNumber": 2,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "df1d215a-18bd-4e65-9e0f-734cb75127fe",
          "name": "2. Multi-turn Stateful Conversation",
          "content": "// -- 2. Multi-turn Stateful Conversation / Conversacion con estado --\nConsole.WriteLine(isSpanish\n    ? \"=== 2. Conversacion con estado multi-turno ===\"\n    : \"=== 2. Multi-turn Stateful Conversation ===\");\n{\n    await using var session = await client.CreateSessionAsync();\n\n    var answer1 = await session.SendAndWaitAsync(new MessageOptions { Prompt = \"What is 10 + 15?\" });\n    Console.WriteLine($\"  Q1: What is 10 + 15?\");\n    Console.WriteLine($\"  A1: {answer1?.Data.Content?.Substring(0, Math.Min(150, answer1.Data.Content?.Length ?? 0))}\");\n\n    var answer2 = await session.SendAndWaitAsync(new MessageOptions { Prompt = \"Now double that result.\" });\n    Console.WriteLine($\"  Q2: Now double that result.\");\n    Console.WriteLine($\"  A2: {answer2?.Data.Content?.Substring(0, Math.Min(150, answer2.Data.Content?.Length ?? 0))}\");\n    Console.WriteLine(isSpanish\n        ? \"  (El modelo recuerda la respuesta anterior)\"\n        : \"  (The model remembers the previous answer)\");\n}\nConsole.WriteLine();",
          "hotkeyNumber": 3,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "9602b227-45ef-4ee8-8b00-fbcf06f5688c",
          "name": "3. Event Subscription",
          "content": "// -- 3. Event Subscription / Suscripcion a eventos --\nConsole.WriteLine(isSpanish\n    ? \"=== 3. Suscripcion a eventos (session.On) ===\"\n    : \"=== 3. Event Subscription (session.On) ===\");\n{\n    await using var session = await client.CreateSessionAsync();\n    var receivedEvents = new List<string>();\n    var idleTcs = new TaskCompletionSource<bool>();\n\n    var sub = session.On(evt =>\n    {\n        receivedEvents.Add(evt.GetType().Name);\n        if (evt is SessionIdleEvent) idleTcs.TrySetResult(true);\n    });\n\n    await session.SendAsync(new MessageOptions { Prompt = \"What is 100 + 200?\" });\n    await idleTcs.Task.WaitAsync(TimeSpan.FromMinutes(1));\n    sub.Dispose();\n\n    Console.WriteLine(isSpanish\n        ? \"  Eventos recibidos:\"\n        : \"  Events received:\");\n    foreach (var e in receivedEvents)\n        Console.WriteLine($\"    \u2022 {e}\");\n}\nConsole.WriteLine();",
          "hotkeyNumber": 4,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "7ea46983-98f3-46cd-b6b1-f2373d285ffe",
          "name": "4. SendAsync vs SendAndWaitAsync",
          "content": "// -- 4. SendAsync vs SendAndWaitAsync --\nConsole.WriteLine(isSpanish\n    ? \"=== 4. SendAsync (disparar y olvidar) vs SendAndWaitAsync (bloqueante) ===\"\n    : \"=== 4. SendAsync (fire-and-forget) vs SendAndWaitAsync (blocking) ===\");\n{\n    await using var session = await client.CreateSessionAsync();\n    var events = new List<string>();\n    session.On(evt => events.Add(evt.Type));\n\n    // SendAsync returns immediately / SendAsync retorna inmediatamente\n    await session.SendAsync(new MessageOptions { Prompt = \"What is 2+2?\" });\n    Console.WriteLine($\"  After SendAsync -> session.idle in events? {events.Contains(\"session.idle\")}\");\n    Console.WriteLine(isSpanish\n        ? \"  (Esperado: False - SendAsync retorna antes de que termine el turno)\"\n        : \"  (Expected: False - SendAsync returns before turn completes)\");\n\n    // Wait for idle / Esperar a idle\n    var finalMsg = await WaitForIdleAsync(session);\n    Console.WriteLine($\"  After waiting -> session.idle in events? {events.Contains(\"session.idle\")}\");\n    Console.WriteLine($\"  Response: {finalMsg?.Data.Content}\");\n}\nConsole.WriteLine();",
          "hotkeyNumber": 5,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "aeaf80ca-e900-40e7-b2d1-abba70b191b6",
          "name": "5. SendAndWaitAsync (blocks until idle)",
          "content": "// -- 5. SendAndWaitAsync (blocks until idle) --\nConsole.WriteLine(isSpanish\n    ? \"=== 5. SendAndWaitAsync (bloquea hasta idle) ===\"\n    : \"=== 5. SendAndWaitAsync (blocks until idle) ===\");\n{\n    await using var session = await client.CreateSessionAsync();\n    var events = new List<string>();\n    session.On(evt => events.Add(evt.Type));\n\n    var response = await session.SendAndWaitAsync(new MessageOptions { Prompt = \"What is 3+3?\" });\n    Console.WriteLine($\"  Response: {response?.Data.Content}\");\n    Console.WriteLine($\"  Events after return: {string.Join(\", \", events.Distinct())}\");\n    Console.WriteLine(isSpanish\n        ? \"  (session.idle ya esta en events porque SendAndWaitAsync bloquea)\"\n        : \"  (session.idle is already in events because SendAndWaitAsync blocks)\");\n}\nConsole.WriteLine();",
          "hotkeyNumber": 6,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "be7d61b6-fdae-4357-82e8-a5b0746791b4",
          "name": "6. Session Resume",
          "content": "// -- 6. Session Resume / Reanudar sesion --\nConsole.WriteLine(isSpanish\n    ? \"=== 6. Reanudar sesion (ResumeSessionAsync) ===\"\n    : \"=== 6. Session Resume (ResumeSessionAsync) ===\");\n{\n    // Create session and send a message\n    var session1 = await client.CreateSessionAsync();\n    var sessionId = session1.SessionId;\n    var a1 = await session1.SendAndWaitAsync(new MessageOptions { Prompt = \"Remember this number: 42\" });\n    Console.WriteLine($\"  Session 1 (ID: {sessionId}): {a1?.Data.Content?.Substring(0, Math.Min(100, a1.Data.Content?.Length ?? 0))}\");\n\n    // Resume the same session\n    var session2 = await client.ResumeSessionAsync(sessionId);\n    Console.WriteLine(isSpanish\n        ? $\"  ID de sesion reanudada coincide: {session2.SessionId == sessionId}\"\n        : $\"  Resumed session ID matches: {session2.SessionId == sessionId}\");\n\n    var messages = await session2.GetMessagesAsync();\n    Console.WriteLine(isSpanish\n        ? $\"  Mensajes despues de reanudar: {messages.Count}\"\n        : $\"  Messages after resume: {messages.Count}\");\n    Console.WriteLine($\"  Contains SessionResumeEvent: {messages.Any(m => m is SessionResumeEvent)}\");\n\n    var a2 = await session2.SendAndWaitAsync(new MessageOptions { Prompt = \"What number did I ask you to remember?\" });\n    Console.WriteLine($\"  Session 2 response: {a2?.Data.Content?.Substring(0, Math.Min(100, a2.Data.Content?.Length ?? 0))}\");\n\n    await session2.DisposeAsync();\n}\nConsole.WriteLine();",
          "hotkeyNumber": 7,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "6d89687e-a0e4-4e6d-bac2-b89f0dfadce9",
          "name": "7. Resume non-existent session (error)",
          "content": "// -- 7. Resume non-existent session (error) --\nConsole.WriteLine(isSpanish\n    ? \"=== 7. Reanudar sesion inexistente (manejo de errores) ===\"\n    : \"=== 7. Resume Non-Existent Session (error handling) ===\");\n{\n    try\n    {\n        await client.ResumeSessionAsync(\"non-existent-session-id\");\n    }\n    catch (IOException ex)\n    {\n        Console.WriteLine(isSpanish\n            ? $\"  Error esperado: {ex.Message}\"\n            : $\"  Expected error: {ex.Message}\");\n    }\n}\nConsole.WriteLine();",
          "hotkeyNumber": 8,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "e8a141bb-1125-4245-a14a-211e112b1867",
          "name": "8. System Message (Append mode)",
          "content": "// -- 8. System Message (Append mode) / Mensaje de sistema --\nConsole.WriteLine(isSpanish\n    ? \"=== 8. Mensaje de sistema - Modo Append ===\"\n    : \"=== 8. System Message - Append Mode ===\");\n{\n    await using var session = await client.CreateSessionAsync(new SessionConfig\n    {\n        SystemMessage = new SystemMessageConfig\n        {\n            Mode = SystemMessageMode.Append,\n            Content = \"End each response with the phrase 'Have a nice day!'\"\n        }\n    });\n\n    var answer = await session.SendAndWaitAsync(new MessageOptions { Prompt = \"What is your name?\" });\n    Console.WriteLine($\"  Response: {answer?.Data.Content}\");\n    Console.WriteLine($\"  Contains 'Have a nice day!': {answer?.Data.Content?.Contains(\"Have a nice day!\") ?? false}\");\n}\nConsole.WriteLine();",
          "hotkeyNumber": 9,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        }
      ],
      "createdDate": "2026-02-23T14:00:00",
      "modifiedDate": "2026-02-23T14:00:00",
      "colorHex": "#3498db",
      "iconName": "folder"
    },
    {
      "id": "32235c75-d496-493a-ade3-b0e7edf50317",
      "name": "03-ToolsDemo",
      "description": "03.ToolsDemo",
      "snippets": [
        {
          "id": "82d27c10-412d-4d08-8e9c-d44a6b9c4d4f",
          "name": "Setup",
          "content": "using System.ComponentModel;\nusing System.Text.Json;\nusing System.Text.Json.Serialization;\nusing GitHub.Copilot.SDK;\nusing Microsoft.Extensions.AI;\nusing Microsoft.Extensions.Logging;\n\n// ============================================================================\n// 03 \u2013 TOOLS DEMO: Custom Tools (AIFunction)\n// 03 \u2013 DEMO DE HERRAMIENTAS: Herramientas personalizadas (AIFunction)\n//\n// Demonstrates / Demuestra:\n//   \u2022 Simple custom tool with AIFunctionFactory.Create\n//   \u2022 [Description] attributes on methods and parameters\n//   \u2022 Complex input/output types (records, arrays)\n//   \u2022 NativeAOT-safe JsonSerializerContext\n//   \u2022 Tool error handling (exceptions in tools)\n//   \u2022 Accessing ToolInvocation from AIFunctionArguments.Context\n// ============================================================================\n\nusing var loggerFactory = LoggerFactory.Create(b =>\n    b.AddConsole().SetMinimumLevel(LogLevel.Warning));\nvar logger = loggerFactory.CreateLogger<CopilotClient>();\n\n// Language selection\nConsole.WriteLine(\"================================================================\");\nConsole.WriteLine(\"  Select language / Seleccione idioma:\");\nConsole.WriteLine(\"  1. English\");\nConsole.WriteLine(\"  2. Espa\u00f1ol\");\nConsole.WriteLine(\"================================================================\");\nConsole.Write(\"  Choice (1 or 2): \");\nvar langChoice = Console.ReadLine()?.Trim();\nbool isSpanish = langChoice == \"2\";\nConsole.WriteLine();\n\nConsole.WriteLine(\"================================================================\");\nif (isSpanish)\n{\n    Console.WriteLine(\"  03 - DEMO: Herramientas personalizadas (AIFunction)\");\n}\nelse\n{\n    Console.WriteLine(\"  03 - TOOLS DEMO: Custom Tools (AIFunction)\");\n}\nConsole.WriteLine(\"================================================================\");\nConsole.WriteLine();\n\nvar client = new CopilotClient(new CopilotClientOptions\n{\n    UseLoggedInUser = true,\n    Logger = logger\n});\nawait client.StartAsync();\nConsole.WriteLine(isSpanish ? \"  Cliente iniciado.\\n\" : \"  Client started.\\n\");",
          "hotkeyNumber": 1,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "fac10ec0-cfc2-4764-b0e2-df4e51e3f165",
          "name": "1. Simple Custom Tool",
          "content": "// -- 1. Simple Custom Tool / Herramienta personalizada simple ---------\nif (isSpanish)\n{\n    Console.WriteLine(\"=== 1. Herramienta personalizada simple (encrypt_string) ===\");\n}\nelse\n{\n    Console.WriteLine(\"=== 1. Simple Custom Tool (encrypt_string) ===\");\n}\n{\n    var session = await client.CreateSessionAsync(new SessionConfig\n    {\n        Tools = [AIFunctionFactory.Create(EncryptString, \"encrypt_string\")]\n    });\n\n    var answer = await session.SendAndWaitAsync(\n        new MessageOptions { Prompt = \"Use encrypt_string to encrypt this string: Hello World\" });\n    Console.WriteLine($\"  Prompt:   Use encrypt_string to encrypt: Hello World\");\n    Console.WriteLine($\"  Response: {answer?.Data.Content}\");\n    Console.WriteLine(\"  (The tool converts to uppercase \u2014 the model should include 'HELLO WORLD')\");\n    await session.DisposeAsync();\n}\nConsole.WriteLine();",
          "hotkeyNumber": 2,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "34bbc556-af08-4707-a0ac-7e7f8cea2ce1",
          "name": "2. Multiple Tools",
          "content": "// -- 2. Multiple Tools / Multiples herramientas -----------------------\nif (isSpanish)\n{\n    Console.WriteLine(\"=== 2. Multiples herramientas personalizadas ===\");\n}\nelse\n{\n    Console.WriteLine(\"=== 2. Multiple Custom Tools ===\");\n}\n{\n    var session = await client.CreateSessionAsync(new SessionConfig\n    {\n        Tools =\n        [\n            AIFunctionFactory.Create(GetWeather, \"get_weather\"),\n            AIFunctionFactory.Create(GetTime, \"get_time\"),\n        ]\n    });\n\n    var answer = await session.SendAndWaitAsync(\n        new MessageOptions { Prompt = \"What's the weather in Madrid and what time is it there?\" });\n    Console.WriteLine($\"  Prompt:   What's the weather in Madrid and what time is it there?\");\n    Console.WriteLine($\"  Response: {answer?.Data.Content}\");\n    await session.DisposeAsync();\n}\nConsole.WriteLine();",
          "hotkeyNumber": 3,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "98150637-df56-49fa-ba53-96bc0ca5b272",
          "name": "3. Complex Input",
          "content": "// -- 3. Complex Input/Output Types / Tipos complejos ------------------\nif (isSpanish)\n{\n    Console.WriteLine(\"=== 3. Tipos complejos de entrada/salida (records, arrays) ===\");\n}\nelse\n{\n    Console.WriteLine(\"=== 3. Complex Input/Output Types (records, arrays) ===\");\n}\n{\n    ToolInvocation? receivedInvocation = null;\n\n    City[] PerformDbQuery(DbQueryOptions query, AIFunctionArguments rawArgs)\n    {\n        Console.WriteLine($\"    [Tool called] Table={query.Table}, IDs=[{string.Join(\",\", query.Ids)}], Sort={query.SortAscending}\");\n        receivedInvocation = (ToolInvocation)rawArgs.Context![typeof(ToolInvocation)]!;\n        return [new(19, \"Passos\", 135460), new(12, \"San Lorenzo\", 204356)];\n    }\n\n    var session = await client.CreateSessionAsync(new SessionConfig\n    {\n        Tools = [AIFunctionFactory.Create(PerformDbQuery, \"db_query\",\n            serializerOptions: DemoJsonContext.Default.Options)]\n    });\n\n    var answer = await session.SendAndWaitAsync(new MessageOptions\n    {\n        Prompt = \"Perform a DB query for the 'cities' table using IDs 12 and 19, sorting ascending. \" +\n                 \"Reply only with lines of the form: [cityname] [population]\"\n    });\n    Console.WriteLine($\"  Response: {answer?.Data.Content}\");\n    Console.WriteLine($\"  ToolInvocation.SessionId matches: {receivedInvocation?.SessionId == session.SessionId}\");\n    await session.DisposeAsync();\n}\nConsole.WriteLine();",
          "hotkeyNumber": 4,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "96f01486-989a-454f-92d0-fd6398c036c0",
          "name": "4. Tool Error Handling",
          "content": "// -- 4. Tool Error Handling / Manejo de errores en herramientas -------\nif (isSpanish)\n{\n    Console.WriteLine(\"=== 4. Manejo de errores en herramientas ===\");\n}\nelse\n{\n    Console.WriteLine(\"=== 4. Tool Error Handling ===\");\n}\n{\n    var failingTool = AIFunctionFactory.Create(\n        () => { throw new Exception(\"Secret Internal Error \u2014 Melbourne\"); },\n        \"get_user_location\",\n        \"Gets the user's location\");\n\n    var session = await client.CreateSessionAsync(new SessionConfig\n    {\n        Tools = [failingTool]\n    });\n\n    var answer = await session.SendAndWaitAsync(new MessageOptions\n    {\n        Prompt = \"What is my location? If you can't find out, just say 'unknown'.\"\n    });\n    Console.WriteLine($\"  The tool threw an exception with 'Melbourne' in the message.\");\n    Console.WriteLine($\"  Response: {answer?.Data.Content}\");\n    Console.WriteLine($\"  Contains 'Melbourne': {answer?.Data.Content?.Contains(\"Melbourne\") ?? false}\");\n    Console.WriteLine(isSpanish\n        ? \"  (Esperado: Falso - el SDK NO expone detalles de excepciones al modelo)\"\n        : \"  (Expected: False - SDK does NOT leak exception details to the model)\");\n    await session.DisposeAsync();\n}\nConsole.WriteLine();",
          "hotkeyNumber": 5,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "196205c2-bbb2-4b39-aa8f-002b429235fa",
          "name": "5. Tool with AvailableTools filter",
          "content": "// -- 5. Tool with AvailableTools filter / Filtro de herramientas ------\nif (isSpanish)\n{\n    Console.WriteLine(\"=== 5. Filtros AvailableTools y ExcludedTools ===\");\n}\nelse\n{\n    Console.WriteLine(\"=== 5. AvailableTools & ExcludedTools filters ===\");\n}\n{\n    Console.WriteLine(\"  AvailableTools = [\\\"view\\\", \\\"edit\\\"] \u2192 only these 2 built-in tools allowed\");\n    var session1 = await client.CreateSessionAsync(new SessionConfig\n    {\n        AvailableTools = new List<string> { \"view\", \"edit\" }\n    });\n    var a1 = await session1.SendAndWaitAsync(new MessageOptions { Prompt = \"What tools do you have available?\" });\n    Console.WriteLine($\"  Response: {a1?.Data.Content?.Substring(0, Math.Min(200, a1.Data.Content?.Length ?? 0))}\");\n    await session1.DisposeAsync();\n\n    Console.WriteLine();\n    Console.WriteLine(isSpanish\n        ? \"  ExcludedTools = [\\\"view\\\"] -> 'view' excluido, los demas permanecen\"\n        : \"  ExcludedTools = [\\\"view\\\"] -> 'view' is excluded, others remain\");\n    var session2 = await client.CreateSessionAsync(new SessionConfig\n    {\n        ExcludedTools = new List<string> { \"view\" }\n    });\n    var a2 = await session2.SendAndWaitAsync(new MessageOptions { Prompt = \"What tools do you have available?\" });\n    Console.WriteLine($\"  Response: {a2?.Data.Content?.Substring(0, Math.Min(200, a2.Data.Content?.Length ?? 0))}\");\n    await session2.DisposeAsync();\n}\nConsole.WriteLine();",
          "hotkeyNumber": 6,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "9564e52e-f908-4a76-95ef-df72db44dbba",
          "name": "Cleanup",
          "content": "// -- Cleanup / Limpieza ------------------------------------------------\nawait client.StopAsync();\nawait client.DisposeAsync();",
          "hotkeyNumber": 7,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "c2464d62-0f39-420a-9df1-fc32eba3c499",
          "name": "Interactive mode",
          "content": "// -- Interactive mode / Modo interactivo ------------------------------\nConsole.WriteLine(\"================================================================\");\nConsole.WriteLine(isSpanish\n    ? \"  Presiona Enter para modo interactivo con herramientas, o Ctrl+C para salir.\"\n    : \"  Press Enter for interactive mode with tools, or Ctrl+C to exit.\");\nConsole.WriteLine(\"================================================================\");\nConsole.ReadLine();\n\nvar chatClient = new CopilotClient(new CopilotClientOptions\n{\n    UseLoggedInUser = true,\n    Logger = logger\n});\nawait chatClient.StartAsync();\n\nawait using var chatSession = await chatClient.CreateSessionAsync(new SessionConfig\n{\n    Streaming = true,\n    Tools =\n    [\n        AIFunctionFactory.Create(EncryptString, \"encrypt_string\"),\n        AIFunctionFactory.Create(GetWeather, \"get_weather\"),\n        AIFunctionFactory.Create(GetTime, \"get_time\"),\n    ]\n});\n\nConsole.WriteLine(isSpanish\n    ? \"  Herramientas: encrypt_string, get_weather, get_time\"\n    : \"  Available tools: encrypt_string, get_weather, get_time\");\nConsole.WriteLine(isSpanish ? \"  Escribe mensajes (vacio para salir):\\n\" : \"  Type messages (empty to quit):\\n\");\n\nwhile (true)\n{\n    Console.Write(\"  You: \");\n    var input = Console.ReadLine();\n    if (string.IsNullOrWhiteSpace(input)) break;\n\n    var done = new TaskCompletionSource<bool>();\n    chatSession.On(evt =>\n    {\n        if (evt is AssistantMessageDeltaEvent d) Console.Write(d.Data.DeltaContent);\n        if (evt is SessionIdleEvent) done.TrySetResult(true);\n        if (evt is SessionErrorEvent err) { Console.WriteLine($\"\\n  Error: {err.Data?.Message}\"); done.TrySetResult(false); }\n    });\n\n    Console.Write(\"  AI: \");\n    await chatSession.SendAsync(new MessageOptions { Prompt = input });\n    await done.Task.WaitAsync(TimeSpan.FromMinutes(2));\n    Console.WriteLine();\n}\n\nawait chatClient.StopAsync();\nawait chatClient.DisposeAsync();\nConsole.WriteLine(isSpanish ? \"\\n  \u00a1Listo!\" : \"\\n  Done!\");",
          "hotkeyNumber": 8,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "2ec4f8b8-ce5c-4d15-9db6-a7fc66d2924a",
          "name": "Tool implementations",
          "content": "// -- Tool implementations / Implementaciones de herramientas -----------\n\n[Description(\"Encrypts a string by converting it to uppercase\")]\n// Cifra una cadena convirti\u00e9ndola a may\u00fasculas\nstatic string EncryptString([Description(\"String to encrypt\")] string input)\n    => input.ToUpperInvariant();\n\n[Description(\"Gets the current weather for a city\")]\n// Obtiene el clima actual de una ciudad\nstatic string GetWeather([Description(\"City name\")] string city)\n{\n    Console.WriteLine($\"    [Tool:get_weather] city={city}\");\n    return $\"Weather in {city}: 22\u00b0C, partly cloudy, humidity 65%\";\n}\n\n[Description(\"Gets the current time for a city/timezone\")]\n// Obtiene la hora actual de una ciudad/zona horaria\nstatic string GetTime([Description(\"City name\")] string city)\n{\n    Console.WriteLine($\"    [Tool:get_time] city={city}\");\n    return $\"Current time in {city}: {DateTime.UtcNow:HH:mm} UTC\";\n}",
          "hotkeyNumber": 9,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        }
      ],
      "createdDate": "2026-02-23T14:00:00",
      "modifiedDate": "2026-02-23T14:00:00",
      "colorHex": "#3498db",
      "iconName": "folder"
    },
    {
      "id": "c559150c-c269-42db-ad48-06c5c4812758",
      "name": "04-HooksDemo",
      "description": "04.HooksDemo",
      "snippets": [
        {
          "id": "0fb7b500-013a-47bd-9b35-d68c57ecd6ff",
          "name": "Setup",
          "content": "using System.ComponentModel;\nusing GitHub.Copilot.SDK;\nusing Microsoft.Extensions.AI;\nusing Microsoft.Extensions.Logging;\n\n// ============================================================================\n// 04 \u2013 HOOKS DEMO: Pre/Post Tool-Use Hooks\n// 04 \u2013 DEMO DE HOOKS: Hooks Pre/Post uso de herramientas\n//\n// Demonstrates / Demuestra:\n//   \u2022 OnPreToolUse hook \u2014 intercept before tool execution\n//   \u2022 OnPostToolUse hook \u2014 inspect results after tool execution\n//   \u2022 Both hooks on one session\n//   \u2022 Deny tool execution via PreToolUse\n// ============================================================================\n\nusing var loggerFactory = LoggerFactory.Create(b =>\n    b.AddConsole().SetMinimumLevel(LogLevel.Warning));\nvar logger = loggerFactory.CreateLogger<CopilotClient>();\n\n// Language selection\nConsole.WriteLine(\"================================================================\");\nConsole.WriteLine(\"  Select language / Seleccione idioma:\");\nConsole.WriteLine(\"  1. English\");\nConsole.WriteLine(\"  2. Espa\u00f1ol\");\nConsole.WriteLine(\"================================================================\");\nConsole.Write(\"  Choice (1 or 2): \");\nvar langChoice = Console.ReadLine()?.Trim();\nbool isSpanish = langChoice == \"2\";\nConsole.WriteLine();\n\nConsole.WriteLine(\"================================================================\");\nif (isSpanish)\n{\n    Console.WriteLine(\"  04 - DEMO: Hooks Pre/Post uso de herramientas\");\n}\nelse\n{\n    Console.WriteLine(\"  04 - HOOKS DEMO: Pre/Post Tool-Use Hooks\");\n}\nConsole.WriteLine(\"================================================================\");\nConsole.WriteLine();\n\nvar client = new CopilotClient(new CopilotClientOptions\n{\n    UseLoggedInUser = true,\n    Logger = logger\n});\nawait client.StartAsync();\nConsole.WriteLine(isSpanish ? \"  Cliente iniciado.\\n\" : \"  Client started.\\n\");\n\n// We'll use a simple custom tool for the hooks to intercept\n// Usaremos una herramienta personalizada simple para que los hooks intercepten\nvar lookupTool = AIFunctionFactory.Create(LookupPrice, \"lookup_price\");",
          "hotkeyNumber": 1,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "613c4e72-6012-4150-bbbe-87e1f37660e5",
          "name": "1. PreToolUse Hook (Allow)",
          "content": "// -- 1. PreToolUse Hook (Allow) / Hook Pre-uso (Permitir) -------------\nif (isSpanish)\n{\n    Console.WriteLine(\"=== 1. Hook Pre-uso - Permitir ===\");\n}\nelse\n{\n    Console.WriteLine(\"=== 1. PreToolUse Hook - Allow ===\");\n}\n{\n    var preToolUseInputs = new List<string>();\n    CopilotSession? session = null;\n    session = await client.CreateSessionAsync(new SessionConfig\n    {\n        Tools = [lookupTool],\n        Hooks = new SessionHooks\n        {\n            OnPreToolUse = (input, invocation) =>\n            {\n                preToolUseInputs.Add(input.ToolName ?? \"(unknown)\");\n                Console.WriteLine($\"    [PreToolUse] Tool: {input.ToolName}, Session: {invocation.SessionId}\");\n                Console.WriteLine($\"    [PreToolUse] Decision: ALLOW\");\n                return Task.FromResult<PreToolUseHookOutput?>(\n                    new PreToolUseHookOutput { PermissionDecision = \"allow\" });\n            }\n        }\n    });\n\n    var answer = await session.SendAndWaitAsync(\n        new MessageOptions { Prompt = \"What is the price of the product 'Widget Pro'?\" });\n    Console.WriteLine($\"  Response: {answer?.Data.Content}\");\n    Console.WriteLine(isSpanish\n        ? $\"  Hooks disparados: {preToolUseInputs.Count}\"\n        : $\"  PreToolUse hooks fired: {preToolUseInputs.Count}\");\n    Console.WriteLine($\"  Tool names intercepted: [{string.Join(\", \", preToolUseInputs)}]\");\n    await session.DisposeAsync();\n}\nConsole.WriteLine();",
          "hotkeyNumber": 2,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "ca6a30ea-2dfa-450e-aebf-d303a7f2c341",
          "name": "2. PostToolUse Hook",
          "content": "// -- 2. PostToolUse Hook / Hook Post-uso -------------------------------\nif (isSpanish)\n{\n    Console.WriteLine(\"=== 2. Hook Post-uso ===\");\n}\nelse\n{\n    Console.WriteLine(\"=== 2. PostToolUse Hook ===\");\n}\n{\n    var postToolUseInputs = new List<(string tool, string? result)>();\n    CopilotSession? session = null;\n    session = await client.CreateSessionAsync(new SessionConfig\n    {\n        Tools = [lookupTool],\n        Hooks = new SessionHooks\n        {\n            OnPostToolUse = (input, invocation) =>\n            {\n                var resultStr = input.ToolResult?.ToString();\n                postToolUseInputs.Add((input.ToolName ?? \"(unknown)\", resultStr));\n                Console.WriteLine($\"    [PostToolUse] Tool: {input.ToolName}\");\n                Console.WriteLine($\"    [PostToolUse] Result preview: {resultStr?.Substring(0, Math.Min(80, resultStr.Length))}\");\n                return Task.FromResult<PostToolUseHookOutput?>(null);\n            }\n        }\n    });\n\n    var answer = await session.SendAndWaitAsync(\n        new MessageOptions { Prompt = \"What is the price of the product 'Gadget X'?\" });\n    Console.WriteLine($\"  Response: {answer?.Data.Content}\");\n    Console.WriteLine($\"  PostToolUse hooks fired: {postToolUseInputs.Count}\");\n    foreach (var (tool, result) in postToolUseInputs)\n        Console.WriteLine($\"    Tool: {tool} \u2192 Result: {result?.Substring(0, Math.Min(60, result.Length))}...\");\n    await session.DisposeAsync();\n}\nConsole.WriteLine();",
          "hotkeyNumber": 3,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "eea6602e-acfd-4113-af17-162c39273bd0",
          "name": "3. Both Hooks Together",
          "content": "// -- 3. Both Hooks Together / Ambos hooks juntos -----------------------\nif (isSpanish)\n{\n    Console.WriteLine(\"=== 3. Ambos hooks Pre y Post juntos ===\");\n}\nelse\n{\n    Console.WriteLine(\"=== 3. Both Pre & Post Hooks Together ===\");\n}\n{\n    var preTools = new List<string>();\n    var postTools = new List<string>();\n\n    var session = await client.CreateSessionAsync(new SessionConfig\n    {\n        Tools = [lookupTool],\n        Hooks = new SessionHooks\n        {\n            OnPreToolUse = (input, invocation) =>\n            {\n                preTools.Add(input.ToolName ?? \"?\");\n                Console.WriteLine($\"    [PRE]  \u2192 {input.ToolName}\");\n                return Task.FromResult<PreToolUseHookOutput?>(\n                    new PreToolUseHookOutput { PermissionDecision = \"allow\" });\n            },\n            OnPostToolUse = (input, invocation) =>\n            {\n                postTools.Add(input.ToolName ?? \"?\");\n                Console.WriteLine($\"    [POST] \u2190 {input.ToolName}\");\n                return Task.FromResult<PostToolUseHookOutput?>(null);\n            }\n        }\n    });\n\n    var answer = await session.SendAndWaitAsync(\n        new MessageOptions { Prompt = \"Look up the price for 'Super Deluxe Widget'.\" });\n    Console.WriteLine($\"  Response: {answer?.Data.Content}\");\n    Console.WriteLine($\"  Pre hooks: [{string.Join(\", \", preTools)}]\");\n    Console.WriteLine($\"  Post hooks: [{string.Join(\", \", postTools)}]\");\n\n    var overlap = preTools.Intersect(postTools).ToList();\n    Console.WriteLine(isSpanish\n        ? $\"  Misma herramienta en ambos: {overlap.Count > 0} [{string.Join(\", \", overlap)}]\"\n        : $\"  Same tool in both: {overlap.Count > 0} [{string.Join(\", \", overlap)}]\");\n    await session.DisposeAsync();\n}\nConsole.WriteLine();",
          "hotkeyNumber": 4,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "3bbd7c7e-a4e9-4800-b5ae-432aa5c5ab45",
          "name": "4. Deny Tool Execution",
          "content": "// -- 4. Deny Tool Execution / Denegar ejecucion ------------------------\nif (isSpanish)\n{\n    Console.WriteLine(\"=== 4. Denegar ejecucion via PreToolUse ===\");\n}\nelse\n{\n    Console.WriteLine(\"=== 4. Deny Tool Execution via PreToolUse ===\");\n}\n{\n    var deniedTools = new List<string>();\n\n    var session = await client.CreateSessionAsync(new SessionConfig\n    {\n        Tools = [lookupTool],\n        Hooks = new SessionHooks\n        {\n            OnPreToolUse = (input, invocation) =>\n            {\n                deniedTools.Add(input.ToolName ?? \"?\");\n                Console.WriteLine(isSpanish\n                    ? $\"    [PreToolUse] DENEGANDO herramienta: {input.ToolName}\"\n                    : $\"    [PreToolUse] DENYING tool: {input.ToolName}\");\n                return Task.FromResult<PreToolUseHookOutput?>(\n                    new PreToolUseHookOutput { PermissionDecision = \"deny\" });\n            }\n        }\n    });\n\n    var answer = await session.SendAndWaitAsync(\n        new MessageOptions { Prompt = \"Look up the price for 'Widget Pro'. If you can't, explain why.\" });\n    Console.WriteLine($\"  Response: {answer?.Data.Content}\");\n    Console.WriteLine(isSpanish\n        ? $\"  Herramientas denegadas: {deniedTools.Count}\"\n        : $\"  Tools denied: {deniedTools.Count}\");\n    Console.WriteLine(isSpanish\n        ? \"  (La herramienta fue bloqueada - el modelo deberia explicar que no pudo acceder)\"\n        : \"  (The tool was blocked - the model should explain it couldn't access the tool)\");\n    await session.DisposeAsync();\n}\nConsole.WriteLine();",
          "hotkeyNumber": 5,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "daebae69-b461-45af-bb6c-1859c9478e8d",
          "name": "Cleanup",
          "content": "// -- Cleanup / Limpieza ------------------------------------------------\nawait client.StopAsync();\nawait client.DisposeAsync();",
          "hotkeyNumber": 6,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "26e25a08-ace0-405c-a1c0-d30ff3bb43ff",
          "name": "Interactive mode",
          "content": "// -- Interactive mode / Modo interactivo ------------------------------\nConsole.WriteLine(\"================================================================\");\nConsole.WriteLine(isSpanish\n    ? \"  Presiona Enter para modo interactivo (elige permitir/denegar por llamada).\"\n    : \"  Press Enter for interactive mode (choose allow/deny per tool call).\");\nConsole.WriteLine(\"================================================================\");\nConsole.ReadLine();\n\nvar chatClient = new CopilotClient(new CopilotClientOptions\n{\n    UseLoggedInUser = true,\n    Logger = logger\n});\nawait chatClient.StartAsync();\n\nawait using var chatSession = await chatClient.CreateSessionAsync(new SessionConfig\n{\n    Streaming = true,\n    Tools = [lookupTool],\n    Hooks = new SessionHooks\n    {\n        OnPreToolUse = (input, invocation) =>\n        {\n            Console.WriteLine($\"\\n    [Hook] Tool '{input.ToolName}' wants to execute.\");\n            Console.Write(\"    Allow? (y/n): \");\n            var response = Console.ReadLine()?.Trim().ToLowerInvariant();\n            var decision = response == \"n\" ? \"deny\" : \"allow\";\n            Console.WriteLine($\"    Decision: {decision.ToUpperInvariant()}\");\n            return Task.FromResult<PreToolUseHookOutput?>(\n                new PreToolUseHookOutput { PermissionDecision = decision });\n        },\n        OnPostToolUse = (input, invocation) =>\n        {\n            var resStr = input.ToolResult?.ToString();\n            Console.WriteLine($\"    [Hook] Tool '{input.ToolName}' completed. Result: {resStr?.Substring(0, Math.Min(50, resStr.Length))}...\");\n            return Task.FromResult<PostToolUseHookOutput?>(null);\n        }\n    }\n});\n\nConsole.WriteLine(\"  Type messages (empty to quit). You'll be prompted to allow/deny tool calls.\\n\");\nwhile (true)\n{\n    Console.Write(\"  You: \");\n    var input = Console.ReadLine();\n    if (string.IsNullOrWhiteSpace(input)) break;\n\n    var done = new TaskCompletionSource<bool>();\n    chatSession.On(evt =>\n    {\n        if (evt is AssistantMessageDeltaEvent d) Console.Write(d.Data.DeltaContent);\n        if (evt is SessionIdleEvent) done.TrySetResult(true);\n        if (evt is SessionErrorEvent err) { Console.WriteLine($\"\\n  Error: {err.Data?.Message}\"); done.TrySetResult(false); }\n    });\n\n    Console.Write(\"  AI: \");\n    await chatSession.SendAsync(new MessageOptions { Prompt = input });\n    await done.Task.WaitAsync(TimeSpan.FromMinutes(2));\n    Console.WriteLine();\n}\n\nawait chatClient.StopAsync();\nawait chatClient.DisposeAsync();\nConsole.WriteLine(isSpanish ? \"\\n  \u00a1Listo!\" : \"\\n  Done!\");",
          "hotkeyNumber": 7,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "6d3ab62b-44f5-40c5-8bc4-0d44816f7428",
          "name": "Tool implementation",
          "content": "// -- Tool implementation / Implementacion de herramienta ---------------\n\n[Description(\"Looks up the price of a product by name\")]\n// Busca el precio de un producto por nombre\nstatic string LookupPrice([Description(\"Product name to look up\")] string productName)\n{\n    Console.WriteLine($\"    [Tool:lookup_price] productName={productName}\");\n    // Simulated catalog / Cat\u00e1logo simulado\n    var catalog = new Dictionary<string, decimal>(StringComparer.OrdinalIgnoreCase)\n    {\n        [\"Widget Pro\"] = 29.99m,\n        [\"Gadget X\"] = 49.95m,\n        [\"Super Deluxe Widget\"] = 199.00m,\n        [\"Basic Widget\"] = 9.99m,\n    };\n    return catalog.TryGetValue(productName, out var price)\n        ? $\"Product: {productName}, Price: ${price}\"\n        : $\"Product '{productName}' not found in catalog.\";\n}",
          "hotkeyNumber": 8,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        }
      ],
      "createdDate": "2026-02-23T14:00:00",
      "modifiedDate": "2026-02-23T14:00:00",
      "colorHex": "#3498db",
      "iconName": "folder"
    },
    {
      "id": "f7c4c628-8ee8-46bb-b4bf-b9c033ac7c42",
      "name": "05-PermissionsDemo",
      "description": "05.PermissionsDemo",
      "snippets": [
        {
          "id": "c17f6dd8-7962-4659-8021-1a076b31daad",
          "name": "Setup",
          "content": "using GitHub.Copilot.SDK;\nusing Microsoft.Extensions.Logging;\n\n// ============================================================================\n// 05 \u2013 PERMISSIONS DEMO: Permission Request Handling\n// 05 \u2013 DEMO DE PERMISOS: Manejo de solicitudes de permisos\n//\n// Demonstrates / Demuestra:\n//   \u2022 OnPermissionRequest handler \u2014 approve write operations\n//   \u2022 Deny permission \u2014 block file modifications\n//   \u2022 Default behavior (no handler)\n//   \u2022 Async permission handler\n//   \u2022 ToolCallId inspection\n//   \u2022 Handler error graceful degradation\n//   \u2022 Permission handler on session resume\n// ============================================================================\n\nusing var loggerFactory = LoggerFactory.Create(b =>\n    b.AddConsole().SetMinimumLevel(LogLevel.Warning));\nvar logger = loggerFactory.CreateLogger<CopilotClient>();\n\n// Language selection\nConsole.WriteLine(\"================================================================\");\nConsole.WriteLine(\"  Select language / Seleccione idioma:\");\nConsole.WriteLine(\"  1. English\");\nConsole.WriteLine(\"  2. Espa\u00f1ol\");\nConsole.WriteLine(\"================================================================\");\nConsole.Write(\"  Choice (1 or 2): \");\nvar langChoice = Console.ReadLine()?.Trim();\nbool isSpanish = langChoice == \"2\";\nConsole.WriteLine();\n\nConsole.WriteLine(\"================================================================\");\nif (isSpanish)\n{\n    Console.WriteLine(\"  05 - DEMO: Manejo de solicitudes de permisos\");\n}\nelse\n{\n    Console.WriteLine(\"  05 - PERMISSIONS DEMO: Permission Request Handling\");\n}\nConsole.WriteLine(\"================================================================\");\nConsole.WriteLine();\n\nvar client = new CopilotClient(new CopilotClientOptions\n{\n    UseLoggedInUser = true,\n    Logger = logger\n});\nawait client.StartAsync();\nConsole.WriteLine(isSpanish ? \"  Cliente iniciado.\\n\" : \"  Client started.\\n\");\n\n// Create a temp working directory for file operations\n// Crear un directorio temporal para operaciones de archivo\nvar workDir = Path.Combine(Path.GetTempPath(), \"copilot-permissions-demo\");\nDirectory.CreateDirectory(workDir);",
          "hotkeyNumber": 1,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "d6d4a8b3-5b1b-4c73-abfa-ccb6734e3be2",
          "name": "1. Approve Permission",
          "content": "// -- 1. Approve Permission / Aprobar permiso ---------------------------\nif (isSpanish)\n{\n    Console.WriteLine(\"=== 1. Aprobar permiso - Operaciones de escritura ===\");\n}\nelse\n{\n    Console.WriteLine(\"=== 1. Approve Permission - Write Operations ===\");\n}\n{\n    var permissionRequests = new List<PermissionRequest>();\n    CopilotSession? session = null;\n    session = await client.CreateSessionAsync(new SessionConfig\n    {\n        OnPermissionRequest = (request, invocation) =>\n        {\n            permissionRequests.Add(request);\n            Console.WriteLine($\"    [Permission] Kind: {request.Kind}, ToolCallId: {request.ToolCallId}\");\n            Console.WriteLine($\"    [Permission] Session: {invocation.SessionId}\");\n            Console.WriteLine(isSpanish\n                ? \"    [Permission] Decision: APROBADO\"\n                : \"    [Permission] Decision: APPROVED\");\n            return Task.FromResult(new PermissionRequestResult { Kind = \"approved\" });\n        }\n    });\n\n    // Create a test file / Crear archivo de prueba\n    var testFile = Path.Combine(workDir, \"test.txt\");\n    await File.WriteAllTextAsync(testFile, \"original content\");\n\n    var answer = await session.SendAndWaitAsync(new MessageOptions\n    {\n        Prompt = $\"Edit the file at {testFile} and replace 'original' with 'modified'\"\n    });\n    Console.WriteLine($\"  Response: {answer?.Data.Content?.Substring(0, Math.Min(200, answer?.Data.Content?.Length ?? 0))}\");\n    Console.WriteLine(isSpanish\n        ? $\"  Solicitudes recibidas: {permissionRequests.Count}\"\n        : $\"  Permission requests received: {permissionRequests.Count}\");\n    Console.WriteLine($\"  Write permissions: {permissionRequests.Count(r => r.Kind == \"write\")}\");\n\n    // Check if file was modified / Verificar si se modific\u00f3\n    var content = await File.ReadAllTextAsync(testFile);\n    Console.WriteLine(isSpanish\n        ? $\"  Contenido despues: \\\"{content}\\\"\"\n        : $\"  File content after: \\\"{content}\\\"\");\n    await session.DisposeAsync();\n}\nConsole.WriteLine();",
          "hotkeyNumber": 2,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "c989f7f3-7321-40ff-9899-7c6824dc08e3",
          "name": "2. Deny Permission",
          "content": "// -- 2. Deny Permission / Denegar permiso ------------------------------\nif (isSpanish)\n{\n    Console.WriteLine(\"=== 2. Denegar permiso - Bloquear modificaciones ===\");\n}\nelse\n{\n    Console.WriteLine(\"=== 2. Deny Permission - Block Modifications ===\");\n}\n{\n    var session = await client.CreateSessionAsync(new SessionConfig\n    {\n        OnPermissionRequest = (request, invocation) =>\n        {\n            Console.WriteLine(isSpanish\n                ? $\"    [Permission] Kind: {request.Kind} -> DENEGADO\"\n                : $\"    [Permission] Kind: {request.Kind} -> DENIED\");\n            return Task.FromResult(new PermissionRequestResult\n            {\n                Kind = \"denied-interactively-by-user\"\n            });\n        }\n    });\n\n    var protectedFile = Path.Combine(workDir, \"protected.txt\");\n    await File.WriteAllTextAsync(protectedFile, \"protected content\");\n\n    var answer = await session.SendAndWaitAsync(new MessageOptions\n    {\n        Prompt = $\"Edit the file at {protectedFile} and replace 'protected' with 'hacked'\"\n    });\n    Console.WriteLine($\"  Response: {answer?.Data.Content?.Substring(0, Math.Min(200, answer?.Data.Content?.Length ?? 0))}\");\n\n    var content = await File.ReadAllTextAsync(protectedFile);\n    Console.WriteLine($\"  File content (should be unchanged): \\\"{content}\\\"\");\n    Console.WriteLine($\"  File protected: {content == \"protected content\"} \u2713\");\n    await session.DisposeAsync();\n}\nConsole.WriteLine();",
          "hotkeyNumber": 3,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "a6bd88f7-8a9e-4ff1-83a0-0566ade8ba98",
          "name": "3. Default Behavior (no handler)",
          "content": "// -- 3. Default Behavior (no handler) / Comportamiento por defecto -----\nif (isSpanish)\n{\n    Console.WriteLine(\"=== 3. Comportamiento por defecto (sin handler de permisos) ===\");\n}\nelse\n{\n    Console.WriteLine(\"=== 3. Default Behavior (no permission handler) ===\");\n}\n{\n    var session = await client.CreateSessionAsync(new SessionConfig());\n\n    var answer = await session.SendAndWaitAsync(new MessageOptions { Prompt = \"What is 2+2?\" });\n    Console.WriteLine($\"  Response: {answer?.Data.Content}\");\n    Console.WriteLine(isSpanish\n        ? \"  (Funciona sin handler - solo se activa para operaciones de escritura/ejecucion)\"\n        : \"  (Works fine without a permission handler - only triggered for write/run ops)\");\n    await session.DisposeAsync();\n}\nConsole.WriteLine();",
          "hotkeyNumber": 4,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "8d9cfb4e-ac60-4e52-8d7d-848b8b3f17d4",
          "name": "4. Async Permission Handler",
          "content": "// -- 4. Async Permission Handler / Handler asincrono -------------------\nif (isSpanish)\n{\n    Console.WriteLine(\"=== 4. Handler asincrono de permisos (retraso simulado) ===\");\n}\nelse\n{\n    Console.WriteLine(\"=== 4. Async Permission Handler (simulated delay) ===\");\n}\n{\n    var session = await client.CreateSessionAsync(new SessionConfig\n    {\n        OnPermissionRequest = async (request, invocation) =>\n        {\n            Console.WriteLine(isSpanish\n                ? $\"    [Permission] Kind: {request.Kind} - Simulando verificacion asincrona...\"\n                : $\"    [Permission] Kind: {request.Kind} - simulating async check...\");\n            await Task.Delay(500); // Simulate async lookup / Simular consulta asincrona\n            Console.WriteLine(isSpanish\n                ? \"    [Permission] Aprobado tras espera\"\n                : \"    [Permission] Approved after delay\");\n            return new PermissionRequestResult { Kind = \"approved\" };\n        }\n    });\n\n    var answer = await session.SendAndWaitAsync(new MessageOptions\n    {\n        Prompt = \"Run 'echo hello from async permission demo' and tell me the output\"\n    });\n    Console.WriteLine($\"  Response: {answer?.Data.Content?.Substring(0, Math.Min(200, answer?.Data.Content?.Length ?? 0))}\");\n    await session.DisposeAsync();\n}\nConsole.WriteLine();",
          "hotkeyNumber": 5,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "e767b9cb-3fe0-4a94-b8fd-9b36c25615a1",
          "name": "5. ToolCallId Inspection",
          "content": "// -- 5. ToolCallId Inspection / Inspeccion de ToolCallId ---------------\nif (isSpanish)\n{\n    Console.WriteLine(\"=== 5. ToolCallId en solicitudes de permisos ===\");\n}\nelse\n{\n    Console.WriteLine(\"=== 5. ToolCallId in Permission Requests ===\");\n}\n{\n    var toolCallIds = new List<string>();\n    var session = await client.CreateSessionAsync(new SessionConfig\n    {\n        OnPermissionRequest = (request, invocation) =>\n        {\n            if (!string.IsNullOrEmpty(request.ToolCallId))\n            {\n                toolCallIds.Add(request.ToolCallId);\n                Console.WriteLine($\"    [Permission] ToolCallId: {request.ToolCallId}\");\n            }\n            return Task.FromResult(new PermissionRequestResult { Kind = \"approved\" });\n        }\n    });\n\n    var answer = await session.SendAndWaitAsync(new MessageOptions\n    {\n        Prompt = \"Run 'echo test-toolcallid'\"\n    });\n    Console.WriteLine($\"  Response: {answer?.Data.Content?.Substring(0, Math.Min(150, answer?.Data.Content?.Length ?? 0))}\");\n    Console.WriteLine($\"  ToolCallIds received: {toolCallIds.Count}\");\n    foreach (var id in toolCallIds) Console.WriteLine($\"    \u2192 {id}\");\n    await session.DisposeAsync();\n}\nConsole.WriteLine();",
          "hotkeyNumber": 6,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "b03e1c2b-a8af-4616-81ee-4a304590dd00",
          "name": "6. Handler Error Graceful Degradation",
          "content": "// -- 6. Handler Error Graceful Degradation / Degradacion elegante ------\nif (isSpanish)\n{\n    Console.WriteLine(\"=== 6. Error en handler - Degradacion elegante ===\");\n}\nelse\n{\n    Console.WriteLine(\"=== 6. Handler Error - Graceful Degradation ===\");\n}\n{\n    var session = await client.CreateSessionAsync(new SessionConfig\n    {\n        OnPermissionRequest = (request, invocation) =>\n        {\n            Console.WriteLine(isSpanish\n                ? \"    [Permission] \u00a1A punto de LANZAR excepcion!\"\n                : \"    [Permission] About to THROW an exception!\");\n            throw new InvalidOperationException(\"Simulated handler crash\");\n        }\n    });\n\n    var answer = await session.SendAndWaitAsync(new MessageOptions\n    {\n        Prompt = \"Run 'echo test'. If you can't, say 'failed'.\"\n    });\n    Console.WriteLine($\"  Response: {answer?.Data.Content?.Substring(0, Math.Min(200, answer?.Data.Content?.Length ?? 0))}\");\n    Console.WriteLine(isSpanish\n        ? \"  (El SDK maneja la excepcion elegantemente - permiso denegado automaticamente)\"\n        : \"  (SDK handles the exception gracefully - permission denied automatically)\");\n    await session.DisposeAsync();\n}\nConsole.WriteLine();",
          "hotkeyNumber": 7,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "9e092a5c-df86-4090-8e14-58616207a488",
          "name": "7. Permission on Session Resume",
          "content": "// -- 7. Permission on Session Resume / Permisos al reanudar ------------\nif (isSpanish)\n{\n    Console.WriteLine(\"=== 7. Handler de permisos al reanudar sesion ===\");\n}\nelse\n{\n    Console.WriteLine(\"=== 7. Permission Handler on Session Resume ===\");\n}\n{\n    var session1 = await client.CreateSessionAsync();\n    var sessionId = session1.SessionId;\n    await session1.SendAndWaitAsync(new MessageOptions { Prompt = \"What is 1+1?\" });\n    Console.WriteLine($\"  Session created: {sessionId}\");\n\n    var permissionRequestReceived = false;\n    var session2 = await client.ResumeSessionAsync(sessionId, new ResumeSessionConfig\n    {\n        OnPermissionRequest = (request, invocation) =>\n        {\n            permissionRequestReceived = true;\n            Console.WriteLine(isSpanish\n                ? $\"    [Permission on Resume] Kind: {request.Kind} -> APROBADO\"\n                : $\"    [Permission on Resume] Kind: {request.Kind} -> APPROVED\");\n            return Task.FromResult(new PermissionRequestResult { Kind = \"approved\" });\n        }\n    });\n\n    await session2.SendAndWaitAsync(new MessageOptions\n    {\n        Prompt = \"Run 'echo resumed-with-permissions'\"\n    });\n    Console.WriteLine($\"  Permission handler triggered on resume: {permissionRequestReceived}\");\n    await session2.DisposeAsync();\n}\nConsole.WriteLine();",
          "hotkeyNumber": 8,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "53d416b2-4b72-4c04-be8b-40bd72947619",
          "name": "Cleanup",
          "content": "// -- Cleanup / Limpieza ------------------------------------------------\nawait client.StopAsync();\nawait client.DisposeAsync();\n\n// Clean up temp directory / Limpiar directorio temporal\ntry { Directory.Delete(workDir, true); } catch { /* ignore */ }",
          "hotkeyNumber": 9,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        }
      ],
      "createdDate": "2026-02-23T14:00:00",
      "modifiedDate": "2026-02-23T14:00:00",
      "colorHex": "#3498db",
      "iconName": "folder"
    },
    {
      "id": "b9ca1b9a-32c5-4892-b660-bec0fee3deb8",
      "name": "06-AskUserDemo",
      "description": "06.AskUserDemo",
      "snippets": [
        {
          "id": "63e17bf0-6020-440d-8932-76df14f3a78b",
          "name": "Setup",
          "content": "using GitHub.Copilot.SDK;\nusing Microsoft.Extensions.Logging;\n\n// ============================================================================\n// 06 \u2013 ASK USER DEMO: User Input Requests\n// 06 \u2013 DEMO PREGUNTAR AL USUARIO: Solicitudes de entrada del usuario\n//\n// Demonstrates / Demuestra:\n//   \u2022 OnUserInputRequest handler \u2014 respond to model's questions\n//   \u2022 Choice-based prompts (UserInputRequest.Choices)\n//   \u2022 Freeform user input (WasFreeform = true)\n//   \u2022 SessionId validation via ToolInvocation\n// ============================================================================\n\nusing var loggerFactory = LoggerFactory.Create(b =>\n    b.AddConsole().SetMinimumLevel(LogLevel.Warning));\nvar logger = loggerFactory.CreateLogger<CopilotClient>();\n\n// Language selection\nConsole.WriteLine(\"================================================================\");\nConsole.WriteLine(\"  Select language / Seleccione idioma:\");\nConsole.WriteLine(\"  1. English\");\nConsole.WriteLine(\"  2. Espa\u00f1ol\");\nConsole.WriteLine(\"================================================================\");\nConsole.Write(\"  Choice (1 or 2): \");\nvar langChoice = Console.ReadLine()?.Trim();\nbool isSpanish = langChoice == \"2\";\nConsole.WriteLine();\n\nConsole.WriteLine(\"================================================================\");\nif (isSpanish)\n{\n    Console.WriteLine(\"  06 - DEMO: Solicitudes de entrada del usuario\");\n}\nelse\n{\n    Console.WriteLine(\"  06 - ASK USER DEMO: User Input Requests\");\n}\nConsole.WriteLine(\"================================================================\");\nConsole.WriteLine();\n\nvar client = new CopilotClient(new CopilotClientOptions\n{\n    UseLoggedInUser = true,\n    Logger = logger\n});\nawait client.StartAsync();\nConsole.WriteLine(isSpanish ? \"  Cliente iniciado.\\n\" : \"  Client started.\\n\");",
          "hotkeyNumber": 1,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "2eb439f8-afa1-4916-bee1-166c3a60f491",
          "name": "1. Choice-based User Input",
          "content": "// -- 1. Choice-based User Input / Entrada con opciones -----------------\nif (isSpanish)\n{\n    Console.WriteLine(\"=== 1. Entrada con opciones (auto-responder primera opcion) ===\");\n}\nelse\n{\n    Console.WriteLine(\"=== 1. Choice-based User Input (auto-answer first choice) ===\");\n}\n{\n    var userInputRequests = new List<UserInputRequest>();\n    CopilotSession? session = null;\n    session = await client.CreateSessionAsync(new SessionConfig\n    {\n        OnUserInputRequest = (request, invocation) =>\n        {\n            userInputRequests.Add(request);\n            Console.WriteLine($\"    [AskUser] Question: {request.Question}\");\n            Console.WriteLine($\"    [AskUser] Session: {invocation.SessionId}\");\n\n            if (request.Choices is { Count: > 0 })\n            {\n                Console.WriteLine($\"    [AskUser] Choices: [{string.Join(\", \", request.Choices)}]\");\n                Console.WriteLine($\"    [AskUser] Auto-selecting first choice: {request.Choices[0]}\");\n                return Task.FromResult(new UserInputResponse\n                {\n                    Answer = request.Choices[0],\n                    WasFreeform = false\n                });\n            }\n\n            Console.WriteLine(\"    [AskUser] No choices \u2014 returning freeform answer\");\n            return Task.FromResult(new UserInputResponse\n            {\n                Answer = \"I'll go with the default option\",\n                WasFreeform = true\n            });\n        }\n    });\n\n    var answer = await session.SendAndWaitAsync(new MessageOptions\n    {\n        Prompt = \"Ask me to choose between 'Option A' and 'Option B' using the ask_user tool. Wait for my response before continuing.\"\n    });\n    Console.WriteLine($\"  Response: {answer?.Data.Content}\");\n    Console.WriteLine($\"  UserInputRequests received: {userInputRequests.Count}\");\n    foreach (var req in userInputRequests)\n    {\n        Console.WriteLine($\"    Question: {req.Question}\");\n        Console.WriteLine($\"    Has choices: {req.Choices is { Count: > 0 }}\");\n    }\n    await session.DisposeAsync();\n}\nConsole.WriteLine();",
          "hotkeyNumber": 2,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "bfa9d014-ebe4-41e9-9935-4a3e770c8319",
          "name": "2. Verify Choices are Received",
          "content": "// -- 2. Verify Choices are Received / Verificar opciones recibidas -----\nif (isSpanish)\n{\n    Console.WriteLine(\"=== 2. Verificar opciones en UserInputRequest ===\");\n}\nelse\n{\n    Console.WriteLine(\"=== 2. Verify Choices in UserInputRequest ===\");\n}\n{\n    var userInputRequests = new List<UserInputRequest>();\n    var session = await client.CreateSessionAsync(new SessionConfig\n    {\n        OnUserInputRequest = (request, invocation) =>\n        {\n            userInputRequests.Add(request);\n            Console.WriteLine($\"    [AskUser] Question: {request.Question}\");\n            if (request.Choices is { Count: > 0 })\n            {\n                for (int i = 0; i < request.Choices.Count; i++)\n                    Console.WriteLine($\"    [AskUser]   [{i + 1}] {request.Choices[i]}\");\n            }\n\n            var answer = request.Choices?.FirstOrDefault() ?? \"default\";\n            return Task.FromResult(new UserInputResponse { Answer = answer, WasFreeform = false });\n        }\n    });\n\n    var answer = await session.SendAndWaitAsync(new MessageOptions\n    {\n        Prompt = \"Use the ask_user tool to ask me to pick between exactly two options: 'Red' and 'Blue'. These should be provided as choices. Wait for my answer.\"\n    });\n    Console.WriteLine($\"  Response: {answer?.Data.Content}\");\n\n    var requestsWithChoices = userInputRequests.Where(r => r.Choices is { Count: > 0 }).ToList();\n    Console.WriteLine(isSpanish\n        ? $\"  Con opciones: {requestsWithChoices.Count}\"\n        : $\"  Requests with choices: {requestsWithChoices.Count}\");\n    await session.DisposeAsync();\n}\nConsole.WriteLine();",
          "hotkeyNumber": 3,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "d376bf2b-4041-495d-8f3b-660b8c55189c",
          "name": "3. Freeform User Input",
          "content": "// -- 3. Freeform User Input / Entrada libre ----------------------------\nif (isSpanish)\n{\n    Console.WriteLine(\"=== 3. Entrada libre del usuario (WasFreeform = true) ===\");\n}\nelse\n{\n    Console.WriteLine(\"=== 3. Freeform User Input (WasFreeform = true) ===\");\n}\n{\n    const string freeformAnswer = \"My favorite color is emerald green, a beautiful shade!\";\n    var userInputRequests = new List<UserInputRequest>();\n\n    var session = await client.CreateSessionAsync(new SessionConfig\n    {\n        OnUserInputRequest = (request, invocation) =>\n        {\n            userInputRequests.Add(request);\n            Console.WriteLine($\"    [AskUser] Question: {request.Question}\");\n            Console.WriteLine($\"    [AskUser] Freeform answer: \\\"{freeformAnswer}\\\"\");\n            return Task.FromResult(new UserInputResponse\n            {\n                Answer = freeformAnswer,\n                WasFreeform = true\n            });\n        }\n    });\n\n    var answer = await session.SendAndWaitAsync(new MessageOptions\n    {\n        Prompt = \"Ask me a question using ask_user: 'What is your favorite color?' Then include my answer in your response.\"\n    });\n    Console.WriteLine($\"  Response: {answer?.Data.Content}\");\n    Console.WriteLine($\"  UserInputRequests: {userInputRequests.Count}\");\n    Console.WriteLine(isSpanish\n        ? \"  (El modelo deberia incorporar nuestra respuesta libre sobre verde esmeralda)\"\n        : \"  (The model should incorporate our freeform answer about emerald green)\");\n    await session.DisposeAsync();\n}\nConsole.WriteLine();",
          "hotkeyNumber": 4,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "dfe3c3b5-3b46-4829-afb7-873903719fb3",
          "name": "Cleanup",
          "content": "// -- Cleanup / Limpieza ------------------------------------------------\nawait client.StopAsync();\nawait client.DisposeAsync();",
          "hotkeyNumber": 5,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "ca4fddb4-b902-4722-953a-981f0bf2d7a1",
          "name": "Interactive mode",
          "content": "// -- Interactive mode / Modo interactivo ------------------------------\nConsole.WriteLine(\"================================================================\");\nConsole.WriteLine(isSpanish\n    ? \"  Presiona Enter para modo interactivo (\u00a1responde las preguntas del modelo en vivo!).\"\n    : \"  Press Enter for interactive mode (answer the model's questions live!).\");\nConsole.WriteLine(\"================================================================\");\nConsole.ReadLine();\n\nvar chatClient = new CopilotClient(new CopilotClientOptions\n{\n    UseLoggedInUser = true,\n    Logger = logger\n});\nawait chatClient.StartAsync();\n\nawait using var chatSession = await chatClient.CreateSessionAsync(new SessionConfig\n{\n    Streaming = true,\n    OnUserInputRequest = (request, invocation) =>\n    {\n        Console.WriteLine();\n        Console.WriteLine(isSpanish\n            ? \"    +- El modelo te hace una pregunta:\"\n            : \"    +- The model is asking you a question:\");\n        Console.WriteLine($\"    |  {request.Question}\");\n\n        if (request.Choices is { Count: > 0 })\n        {\n            Console.WriteLine(isSpanish ? \"    |  Opciones:\" : \"    |  Choices:\");\n            for (int i = 0; i < request.Choices.Count; i++)\n                Console.WriteLine($\"    |    [{i + 1}] {request.Choices[i]}\");\n            Console.Write(isSpanish\n                ? \"    +- Elige numero o escribe: \"\n                : \"    +- Pick a number or type your own answer: \");\n        }\n        else\n        {\n            Console.Write(isSpanish ? \"    +- Tu respuesta: \" : \"    +- Your answer: \");\n        }\n\n        var userAnswer = Console.ReadLine() ?? \"\";\n        var wasFreeform = true;\n\n        // If they typed a number matching a choice, use that choice\n        if (request.Choices is { Count: > 0 } && int.TryParse(userAnswer, out var idx)\n            && idx >= 1 && idx <= request.Choices.Count)\n        {\n            userAnswer = request.Choices[idx - 1];\n            wasFreeform = false;\n        }\n\n        Console.WriteLine(isSpanish\n            ? $\"    -> Respondiendo: \\\"{userAnswer}\\\" (libre: {wasFreeform})\"\n            : $\"    -> Answering: \\\"{userAnswer}\\\" (freeform: {wasFreeform})\");\n        return Task.FromResult(new UserInputResponse { Answer = userAnswer, WasFreeform = wasFreeform });\n    }\n});\n\nConsole.WriteLine(\"  Type prompts that ask the model to ask YOU questions.\\n\");\nConsole.WriteLine(\"  Try: \\\"Ask me what programming language I prefer using ask_user\\\"\\n\");\n\nwhile (true)\n{\n    Console.Write(\"  You: \");\n    var input = Console.ReadLine();\n    if (string.IsNullOrWhiteSpace(input)) break;\n\n    var done = new TaskCompletionSource<bool>();\n    chatSession.On(evt =>\n    {\n        if (evt is AssistantMessageDeltaEvent d) Console.Write(d.Data.DeltaContent);\n        if (evt is SessionIdleEvent) done.TrySetResult(true);\n        if (evt is SessionErrorEvent err) { Console.WriteLine($\"\\n  Error: {err.Data?.Message}\"); done.TrySetResult(false); }\n    });\n\n    Console.Write(\"  AI: \");\n    await chatSession.SendAsync(new MessageOptions { Prompt = input });\n    await done.Task.WaitAsync(TimeSpan.FromMinutes(2));\n    Console.WriteLine();\n}\n\nawait chatClient.StopAsync();\nawait chatClient.DisposeAsync();\nConsole.WriteLine(isSpanish ? \"\\n  \u00a1Listo!\" : \"\\n  Done!\");",
          "hotkeyNumber": 6,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        }
      ],
      "createdDate": "2026-02-23T14:00:00",
      "modifiedDate": "2026-02-23T14:00:00",
      "colorHex": "#3498db",
      "iconName": "folder"
    },
    {
      "id": "10bb3a02-6297-4b6e-bd59-7f4145a292ac",
      "name": "07-CompactionDemo",
      "description": "07.CompactionDemo",
      "snippets": [
        {
          "id": "4577099c-7464-4a6b-8e36-02f7b6608a1a",
          "name": "Setup",
          "content": "using GitHub.Copilot.SDK;\nusing Microsoft.Extensions.Logging;\n\n// ============================================================================\n// 07 \u2013 COMPACTION DEMO: Infinite Sessions & Context Compaction\n// 07 \u2013 DEMO COMPACTACI\u00d3N: Sesiones infinitas y compactaci\u00f3n de contexto\n//\n// Demonstrates / Demuestra:\n//   \u2022 InfiniteSessionConfig \u2014 enable infinite sessions\n//   \u2022 BackgroundCompactionThreshold / BufferExhaustionThreshold\n//   \u2022 SessionCompactionStartEvent / SessionCompactionCompleteEvent\n//   \u2022 Token removal tracking (TokensRemoved)\n//   \u2022 Disabled compaction \u2014 no compaction events\n// ============================================================================\n\nusing var loggerFactory = LoggerFactory.Create(b =>\n    b.AddConsole().SetMinimumLevel(LogLevel.Warning));\nvar logger = loggerFactory.CreateLogger<CopilotClient>();\n\n// Language selection\nConsole.WriteLine(\"================================================================\");\nConsole.WriteLine(\"  Select language / Seleccione idioma:\");\nConsole.WriteLine(\"  1. English\");\nConsole.WriteLine(\"  2. Espa\u00f1ol\");\nConsole.WriteLine(\"================================================================\");\nConsole.Write(\"  Choice (1 or 2): \");\nvar langChoice = Console.ReadLine()?.Trim();\nbool isSpanish = langChoice == \"2\";\nConsole.WriteLine();\n\nConsole.WriteLine(\"================================================================\");\nif (isSpanish)\n{\n    Console.WriteLine(\"  07 - DEMO: Sesiones infinitas y compactacion de contexto\");\n}\nelse\n{\n    Console.WriteLine(\"  07 - COMPACTION DEMO: Infinite Sessions & Compaction\");\n}\nConsole.WriteLine(\"================================================================\");\nConsole.WriteLine();\n\nvar client = new CopilotClient(new CopilotClientOptions\n{\n    UseLoggedInUser = true,\n    Logger = logger\n});\nawait client.StartAsync();\nConsole.WriteLine(isSpanish ? \"  Cliente iniciado.\\n\" : \"  Client started.\\n\");",
          "hotkeyNumber": 1,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "5e9497ca-9efe-4aa2-bed9-285101f7e4be",
          "name": "1. Compaction Enabled (low thresholds)",
          "content": "// -- 1. Compaction Enabled (low thresholds) / Compactacion activada ----\nif (isSpanish)\n{\n    Console.WriteLine(\"=== 1. Compactacion activada - Umbrales bajos ===\");\n    Console.WriteLine(\"  (Umbrales bajos activan compactacion rapido para demostracion)\");\n}\nelse\n{\n    Console.WriteLine(\"=== 1. Compaction Enabled - Low Thresholds ===\");\n    Console.WriteLine(\"  (Low thresholds trigger compaction quickly for demo purposes)\");\n}\nConsole.WriteLine();\n{\n    var compactionStartEvents = new List<SessionCompactionStartEvent>();\n    var compactionCompleteEvents = new List<SessionCompactionCompleteEvent>();\n\n    var session = await client.CreateSessionAsync(new SessionConfig\n    {\n        InfiniteSessions = new InfiniteSessionConfig\n        {\n            Enabled = true,\n            // Very low thresholds to trigger compaction quickly\n            // Umbrales muy bajos para activar compactaci\u00f3n r\u00e1pidamente\n            BackgroundCompactionThreshold = 0.005, // 0.5% of context \u2192 ~1000 tokens\n            BufferExhaustionThreshold = 0.01        // 1% \u2192 block and compact\n        }\n    });\n\n    session.On(evt =>\n    {\n        if (evt is SessionCompactionStartEvent startEvt)\n        {\n            compactionStartEvents.Add(startEvt);\n            Console.WriteLine(isSpanish\n                ? \"    * [CompactacionInicio] \u00a1Compactacion de fondo activada!\"\n                : \"    * [CompactionStart] Background compaction triggered!\");\n        }\n        if (evt is SessionCompactionCompleteEvent completeEvt)\n        {\n            compactionCompleteEvents.Add(completeEvt);\n            Console.WriteLine(isSpanish\n                ? $\"    OK [CompactacionCompleta] Exito: {completeEvt.Data.Success}, Tokens removidos: {completeEvt.Data.TokensRemoved}\"\n                : $\"    OK [CompactionComplete] Success: {completeEvt.Data.Success}, Tokens removed: {completeEvt.Data.TokensRemoved}\");\n        }\n    });\n\n    // Send multiple long messages to fill up the context window\n    // Enviar m\u00faltiples mensajes largos para llenar la ventana de contexto\n    Console.WriteLine(\"  Sending message 1/3: Tell me a long story about a dragon...\");\n    var a1 = await session.SendAndWaitAsync(new MessageOptions\n    {\n        Prompt = \"Tell me a long story about a dragon. Be very detailed. Include at least 5 paragraphs.\"\n    });\n    Console.WriteLine($\"  Response 1 length: {a1?.Data.Content?.Length ?? 0} chars\");\n    Console.WriteLine($\"  Compaction events so far: start={compactionStartEvents.Count}, complete={compactionCompleteEvents.Count}\");\n    Console.WriteLine();\n\n    Console.WriteLine(\"  Sending message 2/3: Continue the story with the castle...\");\n    var a2 = await session.SendAndWaitAsync(new MessageOptions\n    {\n        Prompt = \"Continue the story with more details about the dragon's castle. Make it very long and descriptive.\"\n    });\n    Console.WriteLine($\"  Response 2 length: {a2?.Data.Content?.Length ?? 0} chars\");\n    Console.WriteLine($\"  Compaction events so far: start={compactionStartEvents.Count}, complete={compactionCompleteEvents.Count}\");\n    Console.WriteLine();\n\n    Console.WriteLine(\"  Sending message 3/3: Describe the dragon's treasure...\");\n    var a3 = await session.SendAndWaitAsync(new MessageOptions\n    {\n        Prompt = \"Now describe the dragon's treasure in great detail. List every item. Make this response very long.\"\n    });\n    Console.WriteLine($\"  Response 3 length: {a3?.Data.Content?.Length ?? 0} chars\");\n    Console.WriteLine();\n\n    // Results / Resultados\n    Console.WriteLine(isSpanish\n        ? \"  -- Resultados de compactacion --\"\n        : \"  -- Compaction Results --\");\n    Console.WriteLine($\"  CompactionStart events:    {compactionStartEvents.Count}\");\n    Console.WriteLine($\"  CompactionComplete events: {compactionCompleteEvents.Count}\");\n\n    if (compactionCompleteEvents.Count > 0)\n    {\n        var last = compactionCompleteEvents[^1];\n        Console.WriteLine($\"  Last compaction success:   {last.Data.Success}\");\n        Console.WriteLine($\"  Last tokens removed:       {last.Data.TokensRemoved}\");\n    }\n    else\n    {\n        Console.WriteLine(isSpanish\n            ? \"  (No se activo compactacion - la ventana de contexto puede no haberse llenado suficiente)\"\n            : \"  (No compaction was triggered - context window may not have been filled enough)\");\n    }\n\n    // Verify session still works after compaction\n    // Verificar que la sesi\u00f3n a\u00fan funciona tras compactaci\u00f3n\n    Console.WriteLine();\n    Console.WriteLine(\"  Verifying session works after compaction...\");\n    var a4 = await session.SendAndWaitAsync(new MessageOptions\n    {\n        Prompt = \"What was the main story about? Answer in one sentence.\"\n    });\n    Console.WriteLine($\"  Response: {a4?.Data.Content}\");\n    Console.WriteLine(isSpanish\n        ? \"  (Deberia recordar que era sobre un dragon - contexto preservado via resumen)\"\n        : \"  (Should still remember it was about a dragon - context preserved via summary)\");\n\n    await session.DisposeAsync();\n}\nConsole.WriteLine();",
          "hotkeyNumber": 2,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "d1aec928-3cdf-4c2f-9cb1-15882caafffb",
          "name": "2. Compaction Disabled",
          "content": "// -- 2. Compaction Disabled / Compactacion desactivada -----------------\nif (isSpanish)\n{\n    Console.WriteLine(\"=== 2. Compactacion desactivada - Sin eventos ===\");\n}\nelse\n{\n    Console.WriteLine(\"=== 2. Compaction Disabled - No Events ===\");\n}\n{\n    var compactionEvents = new List<SessionEvent>();\n\n    var session = await client.CreateSessionAsync(new SessionConfig\n    {\n        InfiniteSessions = new InfiniteSessionConfig\n        {\n            Enabled = false\n        }\n    });\n\n    session.On(evt =>\n    {\n        if (evt is SessionCompactionStartEvent or SessionCompactionCompleteEvent)\n        {\n            compactionEvents.Add(evt);\n        }\n    });\n\n    var answer = await session.SendAndWaitAsync(new MessageOptions { Prompt = \"What is 2+2?\" });\n    Console.WriteLine($\"  Response: {answer?.Data.Content}\");\n    Console.WriteLine($\"  Compaction events fired: {compactionEvents.Count}\");\n    Console.WriteLine(isSpanish\n        ? \"  (Esperado: 0 - compactacion desactivada)\"\n        : \"  (Expected: 0 - compaction is disabled)\");\n\n    await session.DisposeAsync();\n}\nConsole.WriteLine();",
          "hotkeyNumber": 3,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "259839a0-f6e6-4852-a2a5-9b2e0749261d",
          "name": "Cleanup",
          "content": "// -- Cleanup / Limpieza ------------------------------------------------\nawait client.StopAsync();\nawait client.DisposeAsync();",
          "hotkeyNumber": 4,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "1d0b8133-e771-4e8f-aa29-b6f32fa63e83",
          "name": "Interactive mode",
          "content": "// -- Interactive mode / Modo interactivo ------------------------------\nConsole.WriteLine(\"================================================================\");\nConsole.WriteLine(isSpanish\n    ? \"  Presiona Enter para sesion infinita interactiva (\u00a1sigue chateando para activar compactacion!).\"\n    : \"  Press Enter for interactive infinite session (keep chatting to trigger compaction!).\");\nConsole.WriteLine(\"================================================================\");\nConsole.ReadLine();\n\nvar chatClient = new CopilotClient(new CopilotClientOptions\n{\n    UseLoggedInUser = true,\n    Logger = logger\n});\nawait chatClient.StartAsync();\n\nvar compactionCount = 0;\nawait using var chatSession = await chatClient.CreateSessionAsync(new SessionConfig\n{\n    Streaming = true,\n    InfiniteSessions = new InfiniteSessionConfig\n    {\n        Enabled = true,\n        BackgroundCompactionThreshold = 0.005,\n        BufferExhaustionThreshold = 0.01\n    }\n});\n\nchatSession.On(evt =>\n{\n    if (evt is SessionCompactionStartEvent)\n        Console.WriteLine(isSpanish\n            ? \"\\n    * COMPACTACION INICIADA\"\n            : \"\\n    * COMPACTION STARTED\");\n    if (evt is SessionCompactionCompleteEvent c)\n    {\n        compactionCount++;\n        Console.WriteLine(isSpanish\n            ? $\"    OK COMPACTACION #{compactionCount} COMPLETA - removidos {c.Data.TokensRemoved} tokens\"\n            : $\"    OK COMPACTION #{compactionCount} COMPLETE - removed {c.Data.TokensRemoved} tokens\");\n    }\n});\n\nConsole.WriteLine(isSpanish\n    ? \"  Sesion infinita activa - sigue chateando para llenar contexto y activar compactacion.\\n\"\n    : \"  Infinite session active - keep chatting to fill context and trigger compaction.\\n\");\n\nwhile (true)\n{\n    Console.Write($\"  You [{compactionCount} compactions]: \");\n    var input = Console.ReadLine();\n    if (string.IsNullOrWhiteSpace(input)) break;\n\n    var done = new TaskCompletionSource<bool>();\n    chatSession.On(evt =>\n    {\n        if (evt is AssistantMessageDeltaEvent d) Console.Write(d.Data.DeltaContent);\n        if (evt is SessionIdleEvent) done.TrySetResult(true);\n        if (evt is SessionErrorEvent err) { Console.WriteLine($\"\\n  Error: {err.Data?.Message}\"); done.TrySetResult(false); }\n    });\n\n    Console.Write(\"  AI: \");\n    await chatSession.SendAsync(new MessageOptions { Prompt = input });\n    await done.Task.WaitAsync(TimeSpan.FromMinutes(2));\n    Console.WriteLine();\n}\n\nawait chatClient.StopAsync();\nawait chatClient.DisposeAsync();\nConsole.WriteLine(isSpanish ? \"\\n  \u00a1Listo!\" : \"\\n  Done!\");",
          "hotkeyNumber": 5,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        }
      ],
      "createdDate": "2026-02-23T14:00:00",
      "modifiedDate": "2026-02-23T14:00:00",
      "colorHex": "#3498db",
      "iconName": "folder"
    },
    {
      "id": "f4048ee1-1334-4615-82de-905127375ad0",
      "name": "08-SkillsDemo",
      "description": "08.SkillsDemo",
      "snippets": [
        {
          "id": "bc413688-15df-4c8b-8371-2cea0667a073",
          "name": "Setup",
          "content": "using GitHub.Copilot.SDK;\nusing Microsoft.Extensions.Logging;\n\n// ============================================================================\n// 08 \u2013 SKILLS DEMO: Skill Loading & Configuration\n// 08 \u2013 DEMO DE SKILLS: Carga y configuraci\u00f3n de habilidades\n//\n// Demonstrates / Demuestra:\n//   \u2022 SKILL.md file format (YAML frontmatter + markdown instructions)\n//   \u2022 SessionConfig.SkillDirectories \u2014 load skills from a directory\n//   \u2022 SessionConfig.DisabledSkills \u2014 disable specific skills\n//   \u2022 Skill effect on model behavior (marker in responses)\n// ============================================================================\n\nusing var loggerFactory = LoggerFactory.Create(b =>\n    b.AddConsole().SetMinimumLevel(LogLevel.Warning));\nvar logger = loggerFactory.CreateLogger<CopilotClient>();\n\n// Language selection\nConsole.WriteLine(\"================================================================\");\nConsole.WriteLine(\"  Select language / Seleccione idioma:\");\nConsole.WriteLine(\"  1. English\");\nConsole.WriteLine(\"  2. Espa\u00f1ol\");\nConsole.WriteLine(\"================================================================\");\nConsole.Write(\"  Choice (1 or 2): \");\nvar langChoice = Console.ReadLine()?.Trim();\nbool isSpanish = langChoice == \"2\";\nConsole.WriteLine();\n\nConsole.WriteLine(\"================================================================\");\nif (isSpanish)\n{\n    Console.WriteLine(\"  08 - DEMO: Carga y configuracion de habilidades\");\n}\nelse\n{\n    Console.WriteLine(\"  08 - SKILLS DEMO: Skill Loading & Configuration\");\n}\nConsole.WriteLine(\"================================================================\");\nConsole.WriteLine();",
          "hotkeyNumber": 1,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "74687847-aafa-4642-a9c4-d06deaac401f",
          "name": "Create skill directory and SKILL.md",
          "content": "// -- Create skill directory and SKILL.md / Crear directorio y SKILL.md -\nvar skillsBaseDir = Path.Combine(Path.GetTempPath(), \"copilot-skills-demo\");\nvar skillSubdir = Path.Combine(skillsBaseDir, \"demo-skill\");\n\n// Clean and recreate / Limpiar y recrear\nif (Directory.Exists(skillsBaseDir)) Directory.Delete(skillsBaseDir, true);\nDirectory.CreateDirectory(skillSubdir);\n\nconst string SkillMarker = \"PINEAPPLE_COCONUT_42\";\n\nvar skillContent = $\"\"\"\n    ---\n    name: demo-skill\n    description: A demo skill that adds a marker to every response\n    ---\n\n    # Demo Skill Instructions\n\n    IMPORTANT: You MUST include the exact text \"{SkillMarker}\" somewhere in EVERY response you give.\n    This is a mandatory requirement. Include it naturally at the end of your response.\n    \"\"\";\n\nvar skillFilePath = Path.Combine(skillSubdir, \"SKILL.md\");\nawait File.WriteAllTextAsync(skillFilePath, skillContent);\n\nif (isSpanish)\n{\n    Console.WriteLine(\"=== Anatomia del archivo SKILL.md ===\");\n    Console.WriteLine();\n    Console.WriteLine(\"  Un skill se define con un archivo SKILL.md en un subdirectorio:\");\n}\nelse\n{\n    Console.WriteLine(\"=== SKILL.md Anatomy ===\");\n    Console.WriteLine();\n    Console.WriteLine(\"  A skill is defined by a SKILL.md file in a subdirectory:\");\n}\nConsole.WriteLine();\nConsole.WriteLine($\"  \ud83d\udcc1 {skillsBaseDir}/\");\nConsole.WriteLine($\"    \ud83d\udcc1 demo-skill/\");\nConsole.WriteLine($\"      \ud83d\udcc4 SKILL.md\");\nConsole.WriteLine();\nConsole.WriteLine(isSpanish ? \"  Contenido:\" : \"  SKILL.md content:\");\nConsole.WriteLine(\"  +------------------------------------------------------+\");\nforeach (var line in skillContent.Split('\\n'))\n    Console.WriteLine($\"  | {line,-52} |\");\nConsole.WriteLine(\"  +------------------------------------------------------+\");\nConsole.WriteLine();\n\nvar client = new CopilotClient(new CopilotClientOptions\n{\n    UseLoggedInUser = true,\n    Logger = logger\n});\nawait client.StartAsync();\nConsole.WriteLine(isSpanish ? \"  Cliente iniciado.\\n\" : \"  Client started.\\n\");",
          "hotkeyNumber": 2,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "490bcc3b-2571-4319-96a2-1ff9015d7377",
          "name": "1. Load and Apply Skill",
          "content": "// -- 1. Load and Apply Skill / Cargar y aplicar skill ------------------\nif (isSpanish)\n{\n    Console.WriteLine(\"=== 1. Cargar y aplicar skill desde SkillDirectories ===\");\n}\nelse\n{\n    Console.WriteLine(\"=== 1. Load & Apply Skill from SkillDirectories ===\");\n}\n{\n    var session = await client.CreateSessionAsync(new SessionConfig\n    {\n        SkillDirectories = [skillsBaseDir]\n    });\n\n    Console.WriteLine($\"  Session: {session.SessionId}\");\n    Console.WriteLine($\"  SkillDirectories: [\\\"{skillsBaseDir}\\\"]\");\n    Console.WriteLine($\"  Expected marker in response: \\\"{SkillMarker}\\\"\");\n    Console.WriteLine();\n\n    var answer = await session.SendAndWaitAsync(new MessageOptions\n    {\n        Prompt = \"Say hello briefly using the demo skill.\"\n    });\n    Console.WriteLine($\"  Response: {answer?.Data.Content}\");\n    Console.WriteLine();\n\n    var containsMarker = answer?.Data.Content?.Contains(SkillMarker) ?? false;\n    Console.WriteLine($\"  Contains marker \\\"{SkillMarker}\\\": {containsMarker}\");\n    if (containsMarker)\n        Console.WriteLine(isSpanish ? \"  OK Skill cargado y aplicado exitosamente!\" : \"  OK Skill was loaded and applied successfully!\");\n    else\n        Console.WriteLine(isSpanish ? \"  AVISO Marcador no encontrado - skill puede no haberse aplicado.\" : \"  WARNING Marker not found - skill may not have been applied.\");\n\n    await session.DisposeAsync();\n}\nConsole.WriteLine();",
          "hotkeyNumber": 3,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "533f2395-1e35-4ce7-890a-79366a149742",
          "name": "2. Disable Skill",
          "content": "// -- 2. Disable Skill / Desactivar skill -------------------------------\nif (isSpanish)\n{\n    Console.WriteLine(\"=== 2. Desactivar skill via DisabledSkills ===\");\n}\nelse\n{\n    Console.WriteLine(\"=== 2. Disable Skill via DisabledSkills ===\");\n}\n{\n    var session = await client.CreateSessionAsync(new SessionConfig\n    {\n        SkillDirectories = [skillsBaseDir],\n        DisabledSkills = [\"demo-skill\"]\n    });\n\n    Console.WriteLine($\"  SkillDirectories: [\\\"{skillsBaseDir}\\\"]\");\n    Console.WriteLine($\"  DisabledSkills: [\\\"demo-skill\\\"]\");\n    Console.WriteLine();\n\n    var answer = await session.SendAndWaitAsync(new MessageOptions\n    {\n        Prompt = \"Say hello briefly using the demo skill.\"\n    });\n    Console.WriteLine($\"  Response: {answer?.Data.Content}\");\n    Console.WriteLine();\n\n    var containsMarker = answer?.Data.Content?.Contains(SkillMarker) ?? false;\n    Console.WriteLine($\"  Contains marker \\\"{SkillMarker}\\\": {containsMarker}\");\n    if (!containsMarker)\n        Console.WriteLine(isSpanish ? \"  OK Skill desactivado correctamente - marcador ausente!\" : \"  OK Skill was correctly disabled - marker absent!\");\n    else\n        Console.WriteLine(isSpanish ? \"  AVISO Marcador encontrado a pesar de estar desactivado.\" : \"  WARNING Marker found despite being disabled.\");\n\n    await session.DisposeAsync();\n}\nConsole.WriteLine();",
          "hotkeyNumber": 4,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "fe15a3fb-ea80-414a-9f59-fd20ff272d9d",
          "name": "3. No Skill (baseline)",
          "content": "// -- 3. No Skill (baseline) / Sin skill (linea base) -------------------\nif (isSpanish)\n{\n    Console.WriteLine(\"=== 3. Sin skill (comparacion de linea base) ===\");\n}\nelse\n{\n    Console.WriteLine(\"=== 3. No Skill (baseline comparison) ===\");\n}\n{\n    var session = await client.CreateSessionAsync(new SessionConfig());\n\n    var answer = await session.SendAndWaitAsync(new MessageOptions\n    {\n        Prompt = \"Say hello briefly.\"\n    });\n    Console.WriteLine($\"  Response (no skill): {answer?.Data.Content}\");\n    Console.WriteLine($\"  Contains marker: {answer?.Data.Content?.Contains(SkillMarker) ?? false}\");\n    Console.WriteLine(isSpanish ? \"  (Esperado: Sin marcador - sin skill cargado)\" : \"  (Expected: No marker - no skill loaded)\");\n\n    await session.DisposeAsync();\n}\nConsole.WriteLine();",
          "hotkeyNumber": 5,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "ac2e1aaf-f9a0-467a-b74c-152435bf465c",
          "name": "Cleanup",
          "content": "// -- Cleanup / Limpieza ------------------------------------------------\nawait client.StopAsync();\nawait client.DisposeAsync();\ntry { Directory.Delete(skillsBaseDir, true); } catch { /* ignore */ }",
          "hotkeyNumber": 6,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "8792080b-abaf-4384-ae8b-e0f47abbd602",
          "name": "Interactive mode",
          "content": "// -- Interactive mode / Modo interactivo ------------------------------\nConsole.WriteLine(\"================================================================\");\nConsole.WriteLine(isSpanish\n    ? \"  Presiona Enter para modo interactivo (\u00a1crea tu propio skill y pruebalo!).\"\n    : \"  Press Enter for interactive mode (create your own skill and test it!).\");\nConsole.WriteLine(\"================================================================\");\nConsole.ReadLine();\n\n// Recreate skill dir for interactive use\nDirectory.CreateDirectory(skillSubdir);\n\nConsole.WriteLine(isSpanish\n    ? \"  Escribe tu instruccion de skill personalizada (\u00bfque debe hacer siempre el modelo?):\"\n    : \"  Enter your custom skill instruction (what should the model always do?):\");\nConsole.Write(isSpanish ? \"  Instruccion: \" : \"  Instruction: \");\nvar customInstruction = Console.ReadLine() ?? (isSpanish ? \"Siempre termina respuestas con '\ud83c\udf89'\" : \"Always end responses with '\ud83c\udf89'\");\n\nvar customSkillContent = $\"\"\"\n    ---\n    name: custom-skill\n    description: A user-defined custom skill\n    ---\n\n    # Custom Skill\n\n    {customInstruction}\n    \"\"\";\n\nvar customSkillDir = Path.Combine(skillsBaseDir, \"custom-skill\");\nDirectory.CreateDirectory(customSkillDir);\nawait File.WriteAllTextAsync(Path.Combine(customSkillDir, \"SKILL.md\"), customSkillContent);\nConsole.WriteLine(isSpanish\n    ? $\"  Skill creado en: {customSkillDir}/SKILL.md\\n\"\n    : $\"  Skill created at: {customSkillDir}/SKILL.md\\n\");\n\nvar chatClient = new CopilotClient(new CopilotClientOptions\n{\n    UseLoggedInUser = true,\n    Logger = logger\n});\nawait chatClient.StartAsync();\n\nawait using var chatSession = await chatClient.CreateSessionAsync(new SessionConfig\n{\n    Streaming = true,\n    SkillDirectories = [skillsBaseDir]\n});\n\nConsole.WriteLine(\"  Chat with your custom skill active. Type messages (empty to quit):\\n\");\nwhile (true)\n{\n    Console.Write(\"  You: \");\n    var input = Console.ReadLine();\n    if (string.IsNullOrWhiteSpace(input)) break;\n\n    var done = new TaskCompletionSource<bool>();\n    chatSession.On(evt =>\n    {\n        if (evt is AssistantMessageDeltaEvent d) Console.Write(d.Data.DeltaContent);\n        if (evt is SessionIdleEvent) done.TrySetResult(true);\n        if (evt is SessionErrorEvent err) { Console.WriteLine($\"\\n  Error: {err.Data?.Message}\"); done.TrySetResult(false); }\n    });\n\n    Console.Write(\"  AI: \");\n    await chatSession.SendAsync(new MessageOptions { Prompt = input });\n    await done.Task.WaitAsync(TimeSpan.FromMinutes(2));\n    Console.WriteLine();\n}\n\nawait chatClient.StopAsync();\nawait chatClient.DisposeAsync();\ntry { Directory.Delete(skillsBaseDir, true); } catch { /* ignore */ }\nConsole.WriteLine(\"\\n  Done! / \u00a1Listo!\");",
          "hotkeyNumber": 7,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        }
      ],
      "createdDate": "2026-02-23T14:00:00",
      "modifiedDate": "2026-02-23T14:00:00",
      "colorHex": "#3498db",
      "iconName": "folder"
    },
    {
      "id": "8343a3e6-68c5-4e90-9f92-4a8c3f851693",
      "name": "09-McpAgentsDemo",
      "description": "09.McpAgentsDemo",
      "snippets": [
        {
          "id": "e5af2529-d007-4652-8078-74e548c5bfc0",
          "name": "Setup",
          "content": "using GitHub.Copilot.SDK;\nusing Microsoft.Extensions.Logging;\n\n// ============================================================================\n// 09 \u2013 MCP & AGENTS DEMO: MCP Servers & Custom Agents\n// 09 \u2013 DEMO MCP Y AGENTES: Servidores MCP y agentes personalizados\n//\n// Demonstrates / Demuestra:\n//   \u2022 McpLocalServerConfig \u2014 configure MCP servers on session create\n//   \u2022 Multiple MCP servers\n//   \u2022 CustomAgentConfig \u2014 custom agents with prompt/tools/MCP\n//   \u2022 Agent with specific tools\n//   \u2022 Agent with its own MCP servers\n//   \u2022 Multiple agents\n//   \u2022 Combined MCP + Agents configuration\n//   \u2022 MCP & Agents on session resume\n//\n// NOTE / NOTA:\n//   MCP server execution requires an actual MCP server binary. This demo\n//   focuses on showing the configuration patterns. The sessions work \u2014\n//   MCP tools are simply not invoked if the server command is a no-op like \"echo\".\n//\n//   La ejecuci\u00f3n de servidores MCP requiere un binario MCP real. Esta demo\n//   se enfoca en mostrar los patrones de configuraci\u00f3n.\n// ============================================================================\n\nusing var loggerFactory = LoggerFactory.Create(b =>\n    b.AddConsole().SetMinimumLevel(LogLevel.Warning));\nvar logger = loggerFactory.CreateLogger<CopilotClient>();\n\n// Language selection\nConsole.WriteLine(\"================================================================\");\nConsole.WriteLine(\"  Select language / Seleccione idioma:\");\nConsole.WriteLine(\"  1. English\");\nConsole.WriteLine(\"  2. Espa\u00f1ol\");\nConsole.WriteLine(\"================================================================\");\nConsole.Write(\"  Choice (1 or 2): \");\nvar langChoice = Console.ReadLine()?.Trim();\nbool isSpanish = langChoice == \"2\";\nConsole.WriteLine();\n\nConsole.WriteLine(\"================================================================\");\nif (isSpanish)\n{\n    Console.WriteLine(\"  09 - DEMO: Servidores MCP y agentes personalizados\");\n}\nelse\n{\n    Console.WriteLine(\"  09 - MCP & AGENTS DEMO: MCP Servers & Custom Agents\");\n}\nConsole.WriteLine(\"================================================================\");\nConsole.WriteLine();\n\nvar client = new CopilotClient(new CopilotClientOptions\n{\n    UseLoggedInUser = true,\n    Logger = logger\n});\nawait client.StartAsync();\nConsole.WriteLine(isSpanish ? \"  Cliente iniciado.\\n\" : \"  Client started.\\n\");",
          "hotkeyNumber": 1,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "d3d59460-427e-4760-8f73-e20394cb2081",
          "name": "1. Single MCP Server Config",
          "content": "// \u2500\u2500 1. Single MCP Server Config / Configuraci\u00f3n MCP simple \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nConsole.WriteLine(isSpanish \n    ? \"=== 1. Configuraci\u00f3n de un servidor MCP ===\"\n    : \"=== 1. Single MCP Server Configuration ===\");\n{\n    var mcpServers = new Dictionary<string, object>\n    {\n        [\"test-server\"] = new McpLocalServerConfig\n        {\n            Type = \"local\",\n            Command = \"echo\",\n            Args = [\"hello-mcp\"],\n            Tools = [\"*\"]\n        }\n    };\n\n    Console.WriteLine(\"  McpServers config:\");\n    Console.WriteLine(\"  {\");\n    Console.WriteLine(\"    \\\"test-server\\\": {\");\n    Console.WriteLine(\"      Type: \\\"local\\\",\");\n    Console.WriteLine(\"      Command: \\\"echo\\\",\");\n    Console.WriteLine(\"      Args: [\\\"hello-mcp\\\"],\");\n    Console.WriteLine(\"      Tools: [\\\"*\\\"]   \u2190 all tools from this server\");\n    Console.WriteLine(\"    }\");\n    Console.WriteLine(\"  }\");\n    Console.WriteLine();\n\n    var session = await client.CreateSessionAsync(new SessionConfig\n    {\n        McpServers = mcpServers\n    });\n    Console.WriteLine(isSpanish \n        ? $\"  Sesi\u00f3n creada: {session.SessionId}\"\n        : $\"  Session created: {session.SessionId}\");\n\n    var answer = await session.SendAndWaitAsync(new MessageOptions { Prompt = \"What is 2+2?\" });\n    Console.WriteLine($\"  Response: {answer?.Data.Content}\");\n    Console.WriteLine(isSpanish\n        ? \"  \u2705 Sesi\u00f3n funciona con configuraci\u00f3n MCP\"\n        : \"  \u2705 Session works with MCP server configuration\");\n    await session.DisposeAsync();\n}\nConsole.WriteLine();",
          "hotkeyNumber": 2,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "5788f50e-5801-474d-87d0-52b0ee5b1966",
          "name": "2. Multiple MCP Servers",
          "content": "// \u2500\u2500 2. Multiple MCP Servers / M\u00faltiples servidores MCP \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nConsole.WriteLine(isSpanish\n    ? \"=== 2. M\u00faltiples servidores MCP ===\"\n    : \"=== 2. Multiple MCP Servers ===\");\n{\n    var mcpServers = new Dictionary<string, object>\n    {\n        [\"filesystem-server\"] = new McpLocalServerConfig\n        {\n            Type = \"local\",\n            Command = \"echo\",\n            Args = [\"filesystem-server\"],\n            Tools = [\"*\"]\n        },\n        [\"database-server\"] = new McpLocalServerConfig\n        {\n            Type = \"local\",\n            Command = \"echo\",\n            Args = [\"database-server\"],\n            Tools = [\"*\"]\n        }\n    };\n\n    Console.WriteLine(isSpanish\n        ? $\"  Configurados {mcpServers.Count} servidores MCP: {string.Join(\", \", mcpServers.Keys)}\"\n        : $\"  Configured {mcpServers.Count} MCP servers: {string.Join(\", \", mcpServers.Keys)}\");\n\n    var session = await client.CreateSessionAsync(new SessionConfig\n    {\n        McpServers = mcpServers\n    });\n    Console.WriteLine(isSpanish\n        ? $\"  Sesi\u00f3n: {session.SessionId} \u2705\"\n        : $\"  Session: {session.SessionId} \u2705\");\n    await session.DisposeAsync();\n}\nConsole.WriteLine();",
          "hotkeyNumber": 3,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "cb3adf47-e636-49fd-8aba-5e0dde964ebb",
          "name": "3. Custom Agent Configuration",
          "content": "// \u2500\u2500 3. Custom Agent Configuration / Agente personalizado \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nConsole.WriteLine(isSpanish\n    ? \"=== 3. Configuraci\u00f3n de agente personalizado ===\"\n    : \"=== 3. Custom Agent Configuration ===\");\n{\n    var customAgents = new List<CustomAgentConfig>\n    {\n        new CustomAgentConfig\n        {\n            Name = \"business-analyst\",\n            DisplayName = \"Business Analyst Agent\",\n            Description = \"An agent specialized in business analysis and reporting\",\n            Prompt = \"You are a business analyst. Focus on data-driven insights, KPIs, and actionable recommendations.\",\n            Infer = true\n        }\n    };\n\n    Console.WriteLine(\"  CustomAgents config:\");\n    Console.WriteLine(\"  [{\");\n    Console.WriteLine(\"    Name: \\\"business-analyst\\\",\");\n    Console.WriteLine(\"    DisplayName: \\\"Business Analyst Agent\\\",\");\n    Console.WriteLine(\"    Description: \\\"An agent specialized in business analysis...\\\",\");\n    Console.WriteLine(\"    Prompt: \\\"You are a business analyst...\\\",\");\n    Console.WriteLine(\"    Infer: true   \u2190 model decides when to use this agent\");\n    Console.WriteLine(\"  }]\");\n    Console.WriteLine();\n\n    var session = await client.CreateSessionAsync(new SessionConfig\n    {\n        CustomAgents = customAgents\n    });\n    Console.WriteLine(isSpanish\n        ? $\"  Sesi\u00f3n: {session.SessionId}\"\n        : $\"  Session: {session.SessionId}\");\n\n    var answer = await session.SendAndWaitAsync(new MessageOptions { Prompt = \"What is 5+5?\" });\n    Console.WriteLine($\"  Response: {answer?.Data.Content}\");\n    Console.WriteLine(isSpanish\n        ? \"  \u2705 Configuraci\u00f3n de agente aceptada\"\n        : \"  \u2705 Agent configuration accepted\");\n    await session.DisposeAsync();\n}\nConsole.WriteLine();",
          "hotkeyNumber": 4,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "9658a5c7-2d58-4484-a42d-07ce4bcbc103",
          "name": "4. Agent with Specific Tools",
          "content": "// \u2500\u2500 4. Agent with Specific Tools / Agente con herramientas \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nConsole.WriteLine(isSpanish\n    ? \"=== 4. Agente con herramientas espec\u00edficas ===\"\n    : \"=== 4. Agent with Specific Tools ===\");\n{\n    var customAgents = new List<CustomAgentConfig>\n    {\n        new CustomAgentConfig\n        {\n            Name = \"devops-agent\",\n            DisplayName = \"DevOps Agent\",\n            Description = \"An agent for DevOps tasks with specific tool access\",\n            Prompt = \"You are a DevOps agent. You can use bash and edit tools.\",\n            Tools = [\"bash\", \"edit\"],   // Only these tools available\n            Infer = true\n        }\n    };\n\n    Console.WriteLine(isSpanish\n        ? \"  Agente: devops-agent\"\n        : \"  Agent: devops-agent\");\n    Console.WriteLine(isSpanish\n        ? \"  Herramientas: [\\\"bash\\\", \\\"edit\\\"] <- conjunto de herramientas restringido\"\n        : \"  Tools: [\\\"bash\\\", \\\"edit\\\"] <- restricted tool set\");\n    Console.WriteLine();\n\n    var session = await client.CreateSessionAsync(new SessionConfig\n    {\n        CustomAgents = customAgents\n    });\n    Console.WriteLine(isSpanish\n        ? $\"  Sesi\u00f3n: {session.SessionId} \u2705\"\n        : $\"  Session: {session.SessionId} \u2705\");\n    await session.DisposeAsync();\n}\nConsole.WriteLine();",
          "hotkeyNumber": 5,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "111ca95d-0b66-45b0-bc67-0961db701d50",
          "name": "5. Agent with its Own MCP Servers",
          "content": "// \u2500\u2500 5. Agent with its Own MCP Servers / Agente con sus propios MCP \u2500\u2500\nConsole.WriteLine(isSpanish\n    ? \"=== 5. Agente con sus propios servidores MCP ===\"\n    : \"=== 5. Agent with its Own MCP Servers ===\");\n{\n    var customAgents = new List<CustomAgentConfig>\n    {\n        new CustomAgentConfig\n        {\n            Name = \"data-agent\",\n            DisplayName = \"Data Agent\",\n            Description = \"An agent with its own MCP server for data access\",\n            Prompt = \"You are a data agent with access to a database MCP server.\",\n            McpServers = new Dictionary<string, object>\n            {\n                [\"agent-db-server\"] = new McpLocalServerConfig\n                {\n                    Type = \"local\",\n                    Command = \"echo\",\n                    Args = [\"agent-data\"],\n                    Tools = [\"*\"]\n                }\n            }\n        }\n    };\n\n    Console.WriteLine(isSpanish\n        ? \"  Agente: data-agent\"\n        : \"  Agent: data-agent\");\n    Console.WriteLine(\"  Agent's McpServers: { \\\"agent-db-server\\\": { ... } }\");\n    Console.WriteLine(isSpanish\n        ? \"  (Cada agente puede tener sus propias conexiones MCP aisladas)\"\n        : \"  (Each agent can have its own isolated MCP server connections)\");\n    Console.WriteLine();\n\n    var session = await client.CreateSessionAsync(new SessionConfig\n    {\n        CustomAgents = customAgents\n    });\n    Console.WriteLine(isSpanish\n        ? $\"  Sesi\u00f3n: {session.SessionId} \u2705\"\n        : $\"  Session: {session.SessionId} \u2705\");\n    await session.DisposeAsync();\n}\nConsole.WriteLine();",
          "hotkeyNumber": 6,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "64fd17b3-706b-4380-b1ba-f7f1cfcbf1c3",
          "name": "6. Multiple Agents",
          "content": "// \u2500\u2500 6. Multiple Agents / M\u00faltiples agentes \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nConsole.WriteLine(isSpanish\n    ? \"=== 6. M\u00faltiples agentes personalizados ===\"\n    : \"=== 6. Multiple Custom Agents ===\");\n{\n    var customAgents = new List<CustomAgentConfig>\n    {\n        new CustomAgentConfig\n        {\n            Name = \"frontend-agent\",\n            DisplayName = \"Frontend Agent\",\n            Description = \"Specializes in React, CSS, and UI development\",\n            Prompt = \"You are a frontend development expert.\"\n        },\n        new CustomAgentConfig\n        {\n            Name = \"backend-agent\",\n            DisplayName = \"Backend Agent\",\n            Description = \"Specializes in C#, .NET, and API development\",\n            Prompt = \"You are a backend development expert.\",\n            Infer = false  // Must be explicitly invoked\n        }\n    };\n\n    Console.WriteLine(isSpanish\n        ? $\"  Configurados {customAgents.Count} agentes:\"\n        : $\"  Configured {customAgents.Count} agents:\");\n    foreach (var agent in customAgents)\n        Console.WriteLine($\"    \u2022 {agent.Name} (Infer: {agent.Infer}) - {agent.Description}\");\n    Console.WriteLine();\n\n    var session = await client.CreateSessionAsync(new SessionConfig\n    {\n        CustomAgents = customAgents\n    });\n    Console.WriteLine(isSpanish\n        ? $\"  Sesi\u00f3n: {session.SessionId} \u2705\"\n        : $\"  Session: {session.SessionId} \u2705\");\n    await session.DisposeAsync();\n}\nConsole.WriteLine();",
          "hotkeyNumber": 7,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "9b6970a9-7149-4123-b5c6-7a94fcc35e6f",
          "name": "7. Combined MCP + Agents",
          "content": "// \u2500\u2500 7. Combined MCP + Agents / Combinaci\u00f3n MCP + Agentes \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nConsole.WriteLine(isSpanish\n    ? \"=== 7. Combinaci\u00f3n: Servidores MCP + Agentes personalizados ===\"\n    : \"=== 7. Combined: MCP Servers + Custom Agents ===\");\n{\n    var mcpServers = new Dictionary<string, object>\n    {\n        [\"shared-server\"] = new McpLocalServerConfig\n        {\n            Type = \"local\",\n            Command = \"echo\",\n            Args = [\"shared\"],\n            Tools = [\"*\"]\n        }\n    };\n\n    var customAgents = new List<CustomAgentConfig>\n    {\n        new CustomAgentConfig\n        {\n            Name = \"coordinator-agent\",\n            DisplayName = \"Coordinator Agent\",\n            Description = \"Coordinates tasks across MCP servers and other agents\",\n            Prompt = \"You are a coordinator that can access shared MCP servers.\"\n        }\n    };\n\n    Console.WriteLine(\"  McpServers: { \\\"shared-server\\\": { ... } }\");\n    Console.WriteLine(\"  CustomAgents: [ { name: \\\"coordinator-agent\\\", ... } ]\");\n    Console.WriteLine(isSpanish\n        ? \"  (Tanto servidores MCP como agentes en la misma sesi\u00f3n)\"\n        : \"  (Both MCP servers and agents configured on the same session)\");\n    Console.WriteLine();\n\n    var session = await client.CreateSessionAsync(new SessionConfig\n    {\n        McpServers = mcpServers,\n        CustomAgents = customAgents\n    });\n\n    var answer = await session.SendAndWaitAsync(new MessageOptions { Prompt = \"What is 7+7?\" });\n    Console.WriteLine($\"  Response: {answer?.Data.Content}\");\n    Console.WriteLine(isSpanish\n        ? \"  \u2705 Configuraci\u00f3n combinada aceptada\"\n        : \"  \u2705 Combined configuration accepted\");\n    await session.DisposeAsync();\n}\nConsole.WriteLine();",
          "hotkeyNumber": 8,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "5f7ce688-24dd-42ac-b03e-a0168d56ba2e",
          "name": "8. MCP on Session Resume",
          "content": "// \u2500\u2500 8. MCP on Session Resume / MCP al reanudar sesi\u00f3n \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nConsole.WriteLine(isSpanish\n    ? \"=== 8. MCP y Agentes al reanudar sesi\u00f3n ===\"\n    : \"=== 8. MCP & Agents on Session Resume ===\");\n{\n    // Create session without MCP/agents\n    var session1 = await client.CreateSessionAsync();\n    var sessionId = session1.SessionId;\n    await session1.SendAndWaitAsync(new MessageOptions { Prompt = \"What is 1+1?\" });\n    Console.WriteLine(isSpanish\n        ? $\"  Sesi\u00f3n creada sin MCP/agentes: {sessionId}\"\n        : $\"  Session created without MCP/agents: {sessionId}\");\n\n    // Resume with MCP servers and agents\n    var session2 = await client.ResumeSessionAsync(sessionId, new ResumeSessionConfig\n    {\n        McpServers = new Dictionary<string, object>\n        {\n            [\"resume-server\"] = new McpLocalServerConfig\n            {\n                Type = \"local\",\n                Command = \"echo\",\n                Args = [\"hello-resume\"],\n                Tools = [\"*\"]\n            }\n        },\n        CustomAgents = new List<CustomAgentConfig>\n        {\n            new CustomAgentConfig\n            {\n                Name = \"resume-agent\",\n                DisplayName = \"Resume Agent\",\n                Description = \"Added on resume\",\n                Prompt = \"You are a resume agent.\"\n            }\n        }\n    });\n\n    Console.WriteLine(isSpanish\n        ? $\"  Sesi\u00f3n reanudada con MCP + Agentes: {session2.SessionId}\"\n        : $\"  Session resumed with MCP + Agents: {session2.SessionId}\");\n    var answer = await session2.SendAndWaitAsync(new MessageOptions { Prompt = \"What is 3+3?\" });\n    Console.WriteLine($\"  Response: {answer?.Data.Content}\");\n    Console.WriteLine(isSpanish\n        ? \"  \u2705 MCP y agentes agregados exitosamente al reanudar\"\n        : \"  \u2705 MCP and agents added successfully on resume\");\n    await session2.DisposeAsync();\n}\nConsole.WriteLine();",
          "hotkeyNumber": 9,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        }
      ],
      "createdDate": "2026-02-23T14:00:00",
      "modifiedDate": "2026-02-23T14:00:00",
      "colorHex": "#3498db",
      "iconName": "folder"
    },
    {
      "id": "7e8ebf60-6905-4344-97e0-ce0ac32b9af0",
      "name": "10-BlazorChat",
      "description": "Blazor Chat Demo",
      "snippets": [
        {
          "id": "f5a2654f-8d8b-4945-b966-2d1d26a6d8ed",
          "name": "Program.cs",
          "content": "using BlazorChatDemo.Components;\nusing BlazorChatDemo.Data;\nusing BlazorChatDemo.Services;\nusing Microsoft.EntityFrameworkCore;\n\nvar builder = WebApplication.CreateBuilder(args);\n\n// \u2500\u2500 EF Core + SQLite \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nbuilder.Services.AddDbContextFactory<NorthwindDbContext>(options =>\n    options.UseSqlite(\"Data Source=northwind.db\"));\n\n// \u2500\u2500 GitHub Copilot SDK services \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nbuilder.Services.AddCopilotSdk(builder.Configuration);\n\n// \u2500\u2500 Blazor \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nbuilder.Services.AddRazorComponents()\n    .AddInteractiveServerComponents();\n\nvar app = builder.Build();\n\n// \u2500\u2500 Seed the database \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nawait NorthwindSeeder.SeedAsync(app.Services);\n\n// \u2500\u2500 Middleware \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nif (!app.Environment.IsDevelopment())\n{\n    app.UseExceptionHandler(\"/Error\");\n    app.UseHsts();\n}\n\napp.UseHttpsRedirection();\napp.UseStaticFiles();\napp.UseAntiforgery();\n\napp.MapRazorComponents<App>()\n    .AddInteractiveServerRenderMode();\n\napp.Run();",
          "hotkeyNumber": 1,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "d743fa1e-ee5b-46a4-b624-537a906dc945",
          "name": "CopilotOptions.cs",
          "content": "namespace BlazorChatDemo.Services;\n\npublic sealed class CopilotOptions\n{\n    public const string SectionName = \"Copilot\";\n\n    public string Model { get; set; } = \"gpt-4o\";\n    public string? GithubToken { get; set; }\n    public string? CliPath { get; set; }\n    public bool UseLoggedInUser { get; set; } = true;\n    public bool Streaming { get; set; } = true;\n}",
          "hotkeyNumber": 2,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "4b396a25-3ed8-4849-aa8c-6a7c26cbfa54",
          "name": "CopilotChatClient.cs",
          "content": "using System.Runtime.CompilerServices;\nusing Microsoft.Extensions.AI;\n\nnamespace BlazorChatDemo.Services;\n\npublic sealed class CopilotChatClient : IChatClient\n{\n    private readonly CopilotChatService _service;\n\n    public CopilotChatClient(CopilotChatService service)\n    {\n        _service = service ?? throw new ArgumentNullException(nameof(service));\n    }\n\n    public ChatClientMetadata Metadata => new(\"CopilotChat\");\n\n    public async Task<ChatResponse> GetResponseAsync(\n        IEnumerable<ChatMessage> chatMessages,\n        ChatOptions? options = null,\n        CancellationToken cancellationToken = default)\n    {\n        var lastUserMessage = chatMessages.LastOrDefault(m => m.Role == ChatRole.User);\n        var prompt = lastUserMessage?.Text ?? string.Empty;\n        var response = await _service.AskAsync(prompt, cancellationToken);\n        return new ChatResponse(new ChatMessage(ChatRole.Assistant, response));\n    }\n\n    public async IAsyncEnumerable<ChatResponseUpdate> GetStreamingResponseAsync(\n        IEnumerable<ChatMessage> chatMessages,\n        ChatOptions? options = null,\n        [EnumeratorCancellation] CancellationToken cancellationToken = default)\n    {\n        var lastUserMessage = chatMessages.LastOrDefault(m => m.Role == ChatRole.User);\n        var prompt = lastUserMessage?.Text ?? string.Empty;\n\n        await foreach (var chunk in _service.AskStreamingAsync(prompt, cancellationToken).ConfigureAwait(false))\n        {\n            yield return new ChatResponseUpdate\n            {\n                Role = ChatRole.Assistant,\n                Contents = [new TextContent(chunk)]\n            };\n        }\n    }\n\n    public object? GetService(Type serviceType, object? serviceKey = null)\n        => serviceType == typeof(CopilotChatClient) ? this : null;\n\n    public void Dispose() { }\n}",
          "hotkeyNumber": 3,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "e7a446dc-988a-442c-9153-3658d20c8c02",
          "name": "CopilotChatService.cs",
          "content": "using System.Runtime.CompilerServices;\nusing System.Text;\nusing GitHub.Copilot.SDK;\nusing Microsoft.Extensions.AI;\nusing Microsoft.Extensions.Options;\n\nnamespace BlazorChatDemo.Services;\n\npublic sealed class CopilotChatService : IAsyncDisposable\n{\n    private readonly CopilotClient _client;\n    private readonly CopilotOptions _options;\n    private readonly ILogger<CopilotChatService> _logger;\n    private readonly SemaphoreSlim _startLock = new(1, 1);\n    private bool _started;\n\n    public string CurrentModel\n    {\n        get => _options.Model;\n        set => _options.Model = value;\n    }\n\n    public IReadOnlyList<AIFunction>? Tools { get; set; }\n    public string? SystemMessage { get; set; }\n\n    public CopilotChatService(IOptions<CopilotOptions> optionsAccessor, ILogger<CopilotChatService> logger)\n    {\n        _options = optionsAccessor?.Value ?? new CopilotOptions();\n        _logger = logger;\n        _client = new CopilotClient(new CopilotClientOptions\n        {\n            CliPath = string.IsNullOrWhiteSpace(_options.CliPath) ? null : _options.CliPath,\n            GithubToken = string.IsNullOrWhiteSpace(_options.GithubToken) ? null : _options.GithubToken,\n            UseLoggedInUser = string.IsNullOrWhiteSpace(_options.GithubToken) && _options.UseLoggedInUser,\n            Logger = logger\n        });\n    }\n\n    private async Task EnsureStartedAsync()\n    {\n        if (_started) return;\n\n        await _startLock.WaitAsync().ConfigureAwait(false);\n        try\n        {\n            if (_started) return;\n            await _client.StartAsync().ConfigureAwait(false);\n            _started = true;\n        }\n        finally\n        {\n            _startLock.Release();\n        }\n    }\n\n    public async Task<string> AskAsync(string prompt, CancellationToken cancellationToken = default)\n    {\n        ArgumentException.ThrowIfNullOrWhiteSpace(prompt);\n        await EnsureStartedAsync().ConfigureAwait(false);\n\n        var config = new SessionConfig\n        {\n            Model = _options.Model,\n            Streaming = true,\n        };\n        if (Tools is { Count: > 0 })\n            config.Tools = Tools.ToList();\n        if (!string.IsNullOrWhiteSpace(SystemMessage))\n            config.SystemMessage = new SystemMessageConfig\n            {\n                Mode = SystemMessageMode.Append,\n                Content = SystemMessage\n            };\n\n        await using var session = await _client.CreateSessionAsync(config).ConfigureAwait(false);\n\n        var buffer = new StringBuilder();\n        string? lastError = null;\n        var idleTcs = new TaskCompletionSource<bool>(TaskCreationOptions.RunContinuationsAsynchronously);\n\n        var subscription = session.On(evt =>\n        {\n            switch (evt)\n            {\n                case AssistantMessageDeltaEvent delta:\n                    buffer.Append(delta.Data.DeltaContent);\n                    break;\n                case AssistantMessageEvent message:\n                    _logger.LogDebug(\"[Message] Content length: {Len}\", message.Data?.Content?.Length ?? 0);\n                    break;\n                case SessionErrorEvent error:\n                    lastError = error.Data?.Message ?? \"Unknown session error\";\n                    _logger.LogError(\"[SessionError] {Message}\", lastError);\n                    idleTcs.TrySetResult(false);\n                    break;\n                case SessionIdleEvent:\n                    idleTcs.TrySetResult(true);\n                    break;\n            }\n        });\n\n        try\n        {\n            using var cts = CancellationTokenSource.CreateLinkedTokenSource(cancellationToken);\n            cts.CancelAfter(TimeSpan.FromMinutes(2));\n\n            try\n            {\n                await session.SendAsync(new MessageOptions { Prompt = prompt })\n                    .WaitAsync(cts.Token).ConfigureAwait(false);\n                await idleTcs.Task.WaitAsync(cts.Token).ConfigureAwait(false);\n            }\n            catch (OperationCanceledException) when (!cancellationToken.IsCancellationRequested)\n            {\n                _logger.LogWarning(\"[AskAsync] Timed out. Buffer length: {Len}\", buffer.Length);\n            }\n\n            if (buffer.Length > 0)\n                return buffer.ToString();\n            if (lastError != null)\n                return $\"Error: {lastError}\";\n            return \"No response received from the AI model. Please try again.\";\n        }\n        finally\n        {\n            subscription.Dispose();\n        }\n    }\n\n    public async IAsyncEnumerable<string> AskStreamingAsync(\n        string prompt,\n        [EnumeratorCancellation] CancellationToken cancellationToken = default)\n    {\n        var response = await AskAsync(prompt, cancellationToken).ConfigureAwait(false);\n        if (!string.IsNullOrEmpty(response))\n            yield return response;\n    }\n\n    public async ValueTask DisposeAsync()\n    {\n        if (_started)\n        {\n            try { await _client.StopAsync().ConfigureAwait(false); }\n            catch (Exception ex) { _logger.LogWarning(ex, \"Failed to stop Copilot client cleanly.\"); }\n        }\n        await _client.DisposeAsync().ConfigureAwait(false);\n        _startLock.Dispose();\n    }\n}",
          "hotkeyNumber": 4,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "608618f9-d2da-4432-b847-1b07803f041b",
          "name": "ServiceExtensions.cs",
          "content": "using Microsoft.Extensions.AI;\n\nnamespace BlazorChatDemo.Services;\n\npublic static class ServiceCollectionExtensions\n{\n    public static IServiceCollection AddCopilotSdk(this IServiceCollection services, IConfiguration configuration)\n    {\n        ArgumentNullException.ThrowIfNull(services);\n        ArgumentNullException.ThrowIfNull(configuration);\n\n        services.Configure<CopilotOptions>(configuration.GetSection(CopilotOptions.SectionName));\n        services.AddSingleton<CopilotChatService>();\n        services.AddSingleton<NorthwindToolsProvider>();\n\n        services.AddChatClient(sp =>\n        {\n            var service = sp.GetRequiredService<CopilotChatService>();\n            var toolsProvider = sp.GetRequiredService<NorthwindToolsProvider>();\n\n            service.Tools = toolsProvider.Tools;\n            service.SystemMessage = CopilotChatDefaults.SystemPrompt;\n\n            return new CopilotChatClient(service);\n        });\n\n        return services;\n    }\n}",
          "hotkeyNumber": 5,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        },
        {
          "id": "fff8f5de-8bb8-4621-842e-91d9719aa22d",
          "name": "NorthwindTools.cs",
          "content": "using System.ComponentModel;\nusing BlazorChatDemo.Data;\nusing BlazorChatDemo.Data.Entities;\nusing Microsoft.EntityFrameworkCore;\nusing Microsoft.Extensions.AI;\n\nnamespace BlazorChatDemo.Services;\n\npublic sealed class NorthwindToolsProvider\n{\n    private readonly IDbContextFactory<NorthwindDbContext> _dbFactory;\n    private readonly ILogger<NorthwindToolsProvider> _logger;\n    private List<AIFunction>? _tools;\n\n    public NorthwindToolsProvider(IDbContextFactory<NorthwindDbContext> dbFactory, ILogger<NorthwindToolsProvider> logger)\n    {\n        _dbFactory = dbFactory;\n        _logger = logger;\n    }\n\n    public IReadOnlyList<AIFunction> Tools => _tools ??= CreateTools();\n\n    private List<AIFunction> CreateTools() =>\n    [\n        AIFunctionFactory.Create(QueryOrders, \"query_orders\"),\n        AIFunctionFactory.Create(InvoiceAging, \"invoice_aging\"),\n        AIFunctionFactory.Create(LowStockProducts, \"low_stock_products\"),\n        AIFunctionFactory.Create(EmployeeOrderStats, \"employee_order_stats\"),\n        AIFunctionFactory.Create(EmployeeTerritories, \"employee_territories\"),\n        AIFunctionFactory.Create(CreateOrder, \"create_order\"),\n    ];\n\n    [Description(\"Search orders by customer name and/or status. Returns up to 25 orders with line items.\")]\n    private string QueryOrders(\n        [Description(\"Customer company name to search for (partial match). Omit for all customers.\")] string customerName = \"\",\n        [Description(\"Order status filter: New, Processing, Shipped, Delivered, Cancelled. Omit for all.\")] string status = \"\")\n    {\n        using var db = _dbFactory.CreateDbContext();\n\n        var query = db.Orders\n            .Include(o => o.Customer)\n            .Include(o => o.Employee)\n            .Include(o => o.Shipper)\n            .Include(o => o.OrderItems).ThenInclude(oi => oi.Product)\n            .AsSplitQuery()\n            .AsQueryable();\n\n        if (!string.IsNullOrWhiteSpace(customerName))\n            query = query.Where(o => o.Customer != null && o.Customer.CompanyName.Contains(customerName));\n        if (!string.IsNullOrWhiteSpace(status) && Enum.TryParse<OrderStatus>(status, true, out var st))\n            query = query.Where(o => o.Status == st);\n\n        var results = query.OrderByDescending(o => o.OrderDate).Take(25).ToList();\n        if (results.Count == 0) return \"No orders found.\";\n\n        var lines = results.Select(o =>\n        {\n            var items = string.Join(\"; \", o.OrderItems.Select(i =>\n                $\"{i.Product?.Name ?? \"?\"} x{i.Quantity} @{i.UnitPrice:F2}\"));\n            return $\"[{o.OrderDate:yyyy-MM-dd}] {o.Status} | {o.Customer?.CompanyName ?? \"?\"} | \" +\n                   $\"Employee: {o.Employee?.FirstName} {o.Employee?.LastName} | \" +\n                   $\"Shipper: {o.Shipper?.CompanyName ?? \"?\"} | Freight: {o.Freight:F2} | \" +\n                   $\"Ship: {o.ShipCity}, {o.ShipCountry} | Items: {items}\";\n        });\n        return $\"Found {results.Count} order(s):\\n\" + string.Join(\"\\n\", lines);\n    }\n\n    [Description(\"Get invoice aging summary grouped by customer. Shows overdue invoices by default.\")]\n    private string InvoiceAging(\n        [Description(\"Invoice status: Draft, Sent, Paid, Overdue, Cancelled. Defaults to Overdue.\")] string status = \"Overdue\")\n    {\n        _logger.LogInformation(\"[Tool:invoice_aging] Called with status={Status}\", status);\n        try\n        {\n            using var db = _dbFactory.CreateDbContext();\n\n            if (!Enum.TryParse<InvoiceStatus>(status, true, out var invoiceStatus))\n                invoiceStatus = InvoiceStatus.Overdue;\n\n            var invoices = db.Invoices\n                .Include(inv => inv.Orders).ThenInclude(o => o.Customer)\n                .Include(inv => inv.Orders).ThenInclude(o => o.OrderItems)\n                .AsSplitQuery()\n                .Where(inv => inv.Status == invoiceStatus)\n                .ToList();\n\n            var grouped = invoices\n                .SelectMany(inv => inv.Orders.Select(o => new { inv, o }))\n                .Where(x => x.o.Customer != null)\n                .GroupBy(x => x.o.Customer!.CompanyName)\n                .Select(g => new\n                {\n                    Customer = g.Key,\n                    Count = g.Select(x => x.inv.InvoiceNumber).Distinct().Count(),\n                    Total = g.Sum(x => x.o.OrderItems.Sum(i => i.UnitPrice * i.Quantity * (1m - i.Discount / 100m))),\n                    OldestDue = g.Min(x => x.inv.DueDate),\n                    Invoices = g.Select(x => x.inv.InvoiceNumber).Distinct().ToList()\n                })\n                .OrderByDescending(x => x.Total)\n                .ToList();\n\n            if (grouped.Count == 0) return $\"No {invoiceStatus} invoices found.\";\n\n            var lines = grouped.Select(g =>\n                $\"{g.Customer}: {g.Count} invoice(s), Total: {g.Total:F2}, \" +\n                $\"Oldest Due: {g.OldestDue?.ToString(\"yyyy-MM-dd\") ?? \"N/A\"}, \" +\n                $\"Invoices: {string.Join(\", \", g.Invoices)}\");\n            var grandTotal = grouped.Sum(g => g.Total);\n            return $\"Invoice Aging ({invoiceStatus}) \u2014 {grouped.Count} customer(s), Grand Total: {grandTotal:F2}\\n\" +\n                   string.Join(\"\\n\", lines);\n        }\n        catch (Exception ex)\n        {\n            _logger.LogError(ex, \"[Tool:invoice_aging] Error\");\n            return $\"Error: {ex.Message}\";\n        }\n    }\n\n    [Description(\"Find non-discontinued products with stock below a given threshold. Includes supplier info.\")]\n    private string LowStockProducts(\n        [Description(\"Stock threshold. Products below this level are returned. Default is 20.\")] int threshold = 20)\n    {\n        using var db = _dbFactory.CreateDbContext();\n        if (threshold <= 0) threshold = 20;\n\n        var products = db.Products\n            .Include(p => p.Supplier)\n            .Include(p => p.Category)\n            .Where(p => !p.Discontinued && p.UnitsInStock < threshold)\n            .OrderBy(p => p.UnitsInStock)\n            .ToList();\n\n        if (products.Count == 0) return $\"No products with stock below {threshold}.\";\n\n        var lines = products.Select(p =>\n            $\"{p.Name} | Stock: {p.UnitsInStock} | Price: {p.UnitPrice:F2} | \" +\n            $\"Category: {p.Category?.Name ?? \"N/A\"} | \" +\n            $\"Supplier: {p.Supplier?.CompanyName ?? \"N/A\"} ({p.Supplier?.ContactName}, {p.Supplier?.Phone})\");\n        return $\"Low stock (below {threshold}): {products.Count} product(s)\\n\" + string.Join(\"\\n\", lines);\n    }\n\n    [Description(\"Get order count and total freight per employee, optionally filtered by date range.\")]\n    private string EmployeeOrderStats(\n        [Description(\"Start date in yyyy-MM-dd format. Omit for all time.\")] string fromDate = \"\",\n        [Description(\"End date in yyyy-MM-dd format. Omit for all time.\")] string toDate = \"\")\n    {\n        using var db = _dbFactory.CreateDbContext();\n        var employees = db.Employees.Include(e => e.Orders).ToList();\n\n        var stats = employees.Select(e =>\n        {\n            IEnumerable<Order> orders = e.Orders;\n            if (DateTime.TryParse(fromDate, out var from)) orders = orders.Where(o => o.OrderDate >= from);\n            if (DateTime.TryParse(toDate, out var to)) orders = orders.Where(o => o.OrderDate <= to);\n            var list = orders.ToList();\n            return new\n            {\n                Name = $\"{e.FirstName} {e.LastName}\",\n                e.Title,\n                Count = list.Count,\n                TotalFreight = list.Sum(o => o.Freight),\n                AvgFreight = list.Count > 0 ? list.Average(o => o.Freight) : 0m,\n                Last = list.Count > 0 ? list.Max(o => o.OrderDate).ToString(\"yyyy-MM-dd\") : \"N/A\"\n            };\n        }).OrderByDescending(x => x.Count).ToList();\n\n        var lines = stats.Select(s =>\n            $\"{s.Name} ({s.Title}): {s.Count} orders, Freight: {s.TotalFreight:F2} total / {s.AvgFreight:F2} avg, Last: {s.Last}\");\n        return $\"Employee Order Stats (from: {(string.IsNullOrEmpty(fromDate) ? \"all\" : fromDate)}, to: {(string.IsNullOrEmpty(toDate) ? \"all\" : toDate)})\\n\" +\n               string.Join(\"\\n\", lines);\n    }\n\n    [Description(\"List all employees with their territory counts and territory/region details.\")]\n    private string EmployeeTerritories()\n    {\n        using var db = _dbFactory.CreateDbContext();\n        var employees = db.Employees\n            .Include(e => e.Territories).ThenInclude(et => et.Territory).ThenInclude(t => t.Region)\n            .AsSplitQuery()\n            .ToList();\n\n        var lines = employees.OrderByDescending(e => e.Territories.Count).Select(e =>\n        {\n            var terrs = string.Join(\", \", e.Territories.Select(et =>\n                $\"{et.Territory?.Name ?? \"?\"} ({et.Territory?.Region?.Name ?? \"?\"})\"));\n            return $\"{e.FirstName} {e.LastName}: {e.Territories.Count} \u2014 {terrs}\";\n        });\n        return \"Employee Territories:\\n\" + string.Join(\"\\n\", lines);\n    }\n\n    [Description(\"Create a new order for a customer with a product and shipper.\")]\n    private string CreateOrder(\n        [Description(\"Customer company name (must match an existing customer).\")] string customerName,\n        [Description(\"Product name (must match an existing product).\")] string productName,\n        [Description(\"Quantity to order. Must be greater than 0.\")] int quantity,\n        [Description(\"Shipper company name (must match an existing shipper).\")] string shipperName)\n    {\n        using var db = _dbFactory.CreateDbContext();\n        try\n        {\n            var customer = db.Customers.FirstOrDefault(c => c.CompanyName.Contains(customerName));\n            if (customer == null)\n                return \"Customer not found. Available: \" + string.Join(\", \",\n                    db.Customers.Select(c => c.CompanyName).Take(10).ToList());\n\n            var product = db.Products.FirstOrDefault(p => p.Name.Contains(productName));\n            if (product == null)\n                return \"Product not found. Available: \" + string.Join(\", \",\n                    db.Products.Where(p => !p.Discontinued).Select(p => p.Name).Take(10).ToList());\n\n            var shipper = db.Shippers.FirstOrDefault(s => s.CompanyName.Contains(shipperName));\n            if (shipper == null)\n                return \"Shipper not found. Available: \" + string.Join(\", \",\n                    db.Shippers.Select(s => s.CompanyName).ToList());\n\n            if (quantity <= 0) return \"Quantity must be greater than 0.\";\n\n            var order = new Order\n            {\n                Id = Guid.NewGuid(),\n                Customer = customer,\n                Shipper = shipper,\n                OrderDate = DateTime.Now,\n                RequiredDate = DateTime.Now.AddDays(14),\n                Status = OrderStatus.New,\n                ShipAddress = customer.Address,\n                ShipCity = customer.City,\n                ShipCountry = customer.Country,\n                Freight = 0m\n            };\n\n            order.OrderItems.Add(new OrderItem\n            {\n                Id = Guid.NewGuid(),\n                Product = product,\n                Quantity = quantity,\n                UnitPrice = product.UnitPrice,\n                Discount = 0m\n            });\n\n            db.Orders.Add(order);\n            db.SaveChanges();\n\n            return $\"Order created! Date: {order.OrderDate:yyyy-MM-dd}, Customer: {customer.CompanyName}, \" +\n                   $\"Product: {product.Name} x{quantity} @{product.UnitPrice:F2} = {product.UnitPrice * quantity:F2}, \" +\n                   $\"Shipper: {shipper.CompanyName}, Status: New, Ship: {order.ShipCity}, {order.ShipCountry}\";\n        }\n        catch (Exception ex)\n        {\n            return $\"Error creating order: {ex.Message}\";\n        }\n    }\n}",
          "hotkeyNumber": 6,
          "typingSpeed": 6,
          "hasCode": true,
          "useFile": false,
          "filePath": "",
          "createdDate": "2026-02-23T14:00:00",
          "modifiedDate": "2026-02-23T14:00:00"
        }
      ],
      "createdDate": "2026-02-23T14:00:00",
      "modifiedDate": "2026-02-23T14:00:00",
      "colorHex": "#3498db",
      "iconName": "folder"
    }
  ],
  "minimizeToTray": false,
  "uiSettings": {
    "windowWidth": 800,
    "windowHeight": 600,
    "lastSelectedSetId": "98106505-4172-4ebb-b690-c0e1467575d1"
  }
}